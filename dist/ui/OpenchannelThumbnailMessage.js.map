{"version":3,"file":"OpenchannelThumbnailMessage.js","sources":["../../src/ui/OpenchannelThumbnailMessage/utils.ts","../../src/ui/OpenchannelThumbnailMessage/index.tsx"],"sourcesContent":["export const SUPPORTING_TYPES = {\n  IMAGE: 'IMAGE',\n  VIDEO: 'VIDEO',\n  UNSUPPORTED: 'UNSUPPORTED',\n};\n\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/webp',\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const getSupportingFileType = (type: string): string => {\n  if (SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.IMAGE;\n  }\n  if (SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.VIDEO;\n  }\n  return SUPPORTING_TYPES.UNSUPPORTED;\n}\n","import React, {\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useContext,\n} from 'react';\nimport { FileMessage } from '@sendbird/chat/message';\nimport format from 'date-fns/format';\nimport './index.scss';\nimport { SUPPORTING_TYPES, getSupportingFileType } from './utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\nimport {\n  checkIsByMe,\n  checkIsSent,\n  checkIsPending,\n  checkIsFailed,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\n\ninterface LocalUrl {\n  localUrl?: string;\n}\ninterface Props {\n  className?: string | Array<string>;\n  message: FileMessage;\n  disabled: boolean;\n  userId: string;\n  chainTop: boolean;\n  chainBottom: boolean;\n  onClick(bool: boolean): void,\n  showRemove(bool: boolean): void,\n  resendMessage(message: FileMessage): void;\n}\n\nexport default function OpenchannelThumbnailMessage({\n  className,\n  message,\n  disabled,\n  userId,\n  chainTop,\n  onClick,\n  showRemove,\n  resendMessage,\n}: Props): JSX.Element {\n  const {\n    type,\n    url,\n    thumbnails,\n    localUrl,\n  }: FileMessage & LocalUrl = message;\n  const status = message?.sendingStatus;\n  const thumbnailUrl = (thumbnails && thumbnails.length > 0 && thumbnails[0].url) || null;\n  const { stringSet, dateLocale } = useLocalization();\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const [messageWidth, setMessageWidth] = useState(360);\n  const messageRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const memorizedThumbnailPlaceHolder = useMemo(() => (type) => ({ style }) => ( // eslint-disable-line\n    <div style={style}>\n      <Icon\n        type={type}\n        fillColor={IconColors.ON_BACKGROUND_2}\n        width=\"56px\"\n        height=\"56px\"\n        />\n    </div>\n  ), []);\n\n  const isByMe = checkIsByMe(message, userId);\n  const isMessageSent = checkIsSent(status);\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  useEffect(() => {\n    const thumbnailWidth = messageRef?.current?.clientWidth - 80;\n    setMessageWidth(thumbnailWidth > 360 ? 360 : thumbnailWidth);\n  }, []);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-thumbnail-message',\n      ].join(' ')}\n      ref={messageRef}\n    >\n      <div className=\"sendbird-openchannel-thumbnail-message__left\">\n        {\n          !chainTop && (\n            <ContextMenu\n              menuTrigger={(toggleDropdown) => (\n                <Avatar\n                  className=\"sendbird-openchannel-thumbnail-message__left__avatar\"\n                  src={sender.profileUrl || ''}\n                  ref={avatarRef}\n                  width=\"28px\"\n                  height=\"28px\"\n                  onClick={() => {\n                    if (!disableUserProfile) {\n                      toggleDropdown();\n                    }\n                  }}\n                />\n              )}\n              menuItems={(closeDropdown) => (\n                <MenuItems\n                  parentRef={avatarRef}\n                  parentContainRef={avatarRef}\n                  closeDropdown={closeDropdown}\n                  style={{ paddingTop: 0, paddingBottom: 0 }}\n                >\n                  {\n                    renderUserProfile\n                      ? (\n                        renderUserProfile({\n                          user: sender,\n                          close: closeDropdown,\n                        })\n                      )\n                      : (\n                        <UserProfile\n                          user={sender}\n                          onSuccess={closeDropdown}\n                          disableMessaging\n                        />\n                      )\n                  }\n                </MenuItems>\n              )}\n            />\n          )\n        }\n      </div>\n      <div className=\"sendbird-openchannel-thumbnail-message__right\">\n        {\n          !chainTop && (\n            <div className=\"sendbird-openchannel-thumbnail-message__right__title\">\n              <Label\n                className=\"sendbird-openchannel-thumbnail-message__right__title__sender-name\"\n                type={LabelTypography.CAPTION_2}\n                color={isByMe ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n              >\n                {\n                  sender && (\n                    sender.friendName\n                    || sender.nickname\n                    || sender.userId\n                  )\n                }\n              </Label>\n              <Label\n                className=\"sendbird-openchannel-thumbnail-message__right__title__sent-at\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_3}\n              >\n                {\n                  message?.createdAt && (\n                    format(message.createdAt, 'p', {\n                      locale: dateLocale,\n                    })\n                  )\n                }\n              </Label>\n            </div>\n          )\n        }\n        <div className=\"sendbird-openchannel-thumbnail-message__right__body\">\n          <div\n            className=\"sendbird-openchannel-thumbnail-message__right__body__wrap\"\n            role=\"button\"\n            onClick={() => {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }}\n            onKeyDown={() => {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }}\n            tabIndex={0}\n          >\n            <div className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay\" />\n            {\n              {\n                [SUPPORTING_TYPES.VIDEO]: (\n                  (url || localUrl)\n                    ? (\n                      <div className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video\" >\n                        {\n                          (thumbnailUrl)\n                            ? (\n                              <ImageRenderer\n                                className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video\"\n                                url={thumbnailUrl}\n                                width={messageWidth}\n                                height=\"270px\"\n                                alt=\"image\"\n                                placeHolder={memorizedThumbnailPlaceHolder(IconTypes.PLAY)}\n                              />\n                            )\n                            : (\n                              <video className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video\">\n                                <source src={url || localUrl} type={type} />\n                              </video>\n                            )\n                        }\n                        <Icon\n                          className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon\"\n                          type={IconTypes.PLAY}\n                          fillColor={IconColors.ON_BACKGROUND_2}\n                          width=\"56px\"\n                          height=\"56px\"\n                        />\n                      </div>\n                    )\n                    : (\n                      <Icon\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon\"\n                        type={IconTypes.PHOTO}\n                        fillColor={IconColors.ON_BACKGROUND_2}\n                        width=\"56px\"\n                        height=\"56px\"\n                      />\n                    )\n                ),\n                [SUPPORTING_TYPES.IMAGE]: (\n                  (url || localUrl)\n                    ? (\n                      <ImageRenderer\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__image\"\n                        url={thumbnailUrl || url || localUrl}\n                        alt=\"image\"\n                        width={messageWidth}\n                        height=\"270px\"\n                        placeHolder={memorizedThumbnailPlaceHolder(IconTypes.PHOTO)}\n                      />\n                    )\n                    : (\n                      <Icon\n                        className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon\"\n                        type={IconTypes.PHOTO}\n                        fillColor={IconColors.ON_BACKGROUND_2}\n                        width=\"56px\"\n                        height=\"56px\"\n                      />\n                    )\n                ),\n                [SUPPORTING_TYPES.UNSUPPORTED]: (\n                  <Icon\n                    className=\"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown\"\n                    type={IconTypes.PHOTO}\n                    fillColor={IconColors.ON_BACKGROUND_2}\n                    width=\"56px\"\n                    height=\"56px\"\n                  />\n                ),\n              }[getSupportingFileType(type)]\n            }\n          </div>\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-thumbnail-message__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-thumbnail-message__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-thumbnail-message__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    fillColor={IconColors.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      <div\n        className=\"sendbird-openchannel-thumbnail-message__context-menu\"\n        ref={contextMenuRef}\n      >\n        <ContextMenu\n          menuTrigger={(toggleDropdown) => (\n            showMenuTrigger({ message, userId, status }) && (\n              <IconButton\n                className=\"sendbird-openchannel-thumbnail-message__context-menu--icon\"\n                width=\"32px\"\n                height=\"32px\"\n                onClick={toggleDropdown}\n              >\n                <Icon\n                  type={IconTypes.MORE}\n                  fillColor={IconColors.CONTENT_INVERSE}\n                  width=\"24px\"\n                  height=\"24px\"\n                />\n              </IconButton>\n            )\n          )}\n          menuItems={(closeDropdown) => (\n            <MenuItems\n              parentRef={contextMenuRef}\n              parentContainRef={contextMenuRef}\n              closeDropdown={closeDropdown}\n              openLeft\n            >\n              {\n                isFineResend({ message, userId, status }) && (\n                  <MenuItem\n                    onClick={() => {\n                      resendMessage(message);\n                      closeDropdown();\n                    }}\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                  </MenuItem>\n                )\n              }\n              {\n                isFineDelete({ message, userId, status }) && (\n                  <MenuItem\n                    onClick={() => {\n                      if (disabled) {\n                        return;\n                      }\n                      showRemove(true);\n                      closeDropdown();\n                    }}\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                  </MenuItem>\n                )\n              }\n            </MenuItems>\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":["SUPPORTING_TYPES","IMAGE","VIDEO","UNSUPPORTED","SUPPORTED_MIMES","getSupportingFileType","type","indexOf","OpenchannelThumbnailMessage","_a","className","message","disabled","userId","chainTop","onClick","showRemove","resendMessage","url","thumbnails","localUrl","status","sendingStatus","thumbnailUrl","length","_c","useLocalization","stringSet","dateLocale","_d","useContext","UserProfileContext","disableUserProfile","renderUserProfile","_e","useState","messageWidth","setMessageWidth","messageRef","useRef","contextMenuRef","avatarRef","memorizedThumbnailPlaceHolder","useMemo","style","React","IconColors","ON_BACKGROUND_2","isByMe","checkIsByMe","isMessageSent","checkIsSent","isPending","checkIsPending","isFailed","checkIsFailed","sender","getSenderFromMessage","useEffect","thumbnailWidth","current","clientWidth","__spreadArray","Array","isArray","join","toggleDropdown","profileUrl","closeDropdown","paddingTop","paddingBottom","user","close","UserProfile","LabelTypography","CAPTION_2","LabelColors","SECONDARY_3","ONBACKGROUND_2","friendName","nickname","CAPTION_3","ONBACKGROUND_3","createdAt","format","locale","_b","IconTypes","PLAY","PHOTO","SPINNER","PRIMARY","ERROR","showMenuTrigger","MORE","CONTENT_INVERSE","isFineResend","CONTEXT_MENU_DROPDOWN__RESEND","isFineDelete","CONTEXT_MENU_DROPDOWN__DELETE"],"mappings":"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"}