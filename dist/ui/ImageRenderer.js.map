{"version":3,"file":"ImageRenderer.js","sources":["../../src/ui/ImageRenderer/index.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\n// TODO: Set up the official constant of width and height with DesignTeam\n\nexport default function ImageRenderer({\n  className,\n  url,\n  alt,\n  width,\n  height,\n  fixedSize,\n  defaultComponent,\n  circle,\n  placeHolder, // a function returing JSX / (style) => Element\n  onLoad,\n  onError,\n}) {\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n\n  const DefaultComponent = useMemo(() => {\n    if (typeof defaultComponent === 'function') {\n      return defaultComponent();\n    }\n    return defaultComponent;\n  }, [defaultComponent]);\n\n  const PlaceHolder = useMemo(() => {\n    if (placeHolder && typeof placeHolder === 'function') {\n      return placeHolder({\n        style: {\n          width: '100%',\n          minWidth: width,\n          maxWidth: fixedSize ? width : '400px',\n          height,\n          position: 'absolute',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        },\n      });\n    }\n    return null;\n  }, [placeHolder]);\n\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return (\n      <img\n        className=\"sendbird-image-renderer__hidden-image-loader\"\n        src={url}\n        alt={alt}\n        onLoad={() => {\n          setShowPlaceHolder(false);\n          onLoad();\n        }}\n        onError={() => {\n          setShowDefaultComponent(true);\n          onError();\n        }}\n      />\n    );\n  }, [url]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-image-renderer',\n      ].join(' ')}\n      style={{\n        width: '100%',\n        minWidth: width,\n        maxWidth: fixedSize ? width : '400px',\n        height,\n      }}\n    >\n      {showPlaceHolder && PlaceHolder}\n      {\n        showDefaultComponent\n          ? DefaultComponent\n          : (\n            <div\n              className=\"sendbird-image-renderer__image\"\n              style={{\n                width: '100%',\n                minWidth: width,\n                maxWidth: fixedSize ? width : '400px',\n                height,\n                position: 'absolute',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                backgroundImage: `url(${url})`,\n                borderRadius: circle ? '50%' : null,\n              }}\n            />\n          )\n      }\n      {HiddenImageLoader}\n    </div>\n  );\n}\n\nImageRenderer.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.string,\n  ]),\n  url: PropTypes.string.isRequired,\n  alt: PropTypes.string,\n  width: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  height: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  fixedSize: PropTypes.bool,\n  defaultComponent: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.func,\n  ]),\n  placeHolder: PropTypes.func,\n  circle: PropTypes.bool,\n  onLoad: PropTypes.func,\n  onError: PropTypes.func,\n};\nImageRenderer.defaultProps = {\n  className: '',\n  defaultComponent: null,\n  placeHolder: null,\n  alt: '',\n  width: null,\n  height: null,\n  fixedSize: false,\n  circle: false,\n  onLoad: () => { },\n  onError: () => { },\n};\n"],"names":["ImageRenderer","className","url","alt","width","height","fixedSize","defaultComponent","circle","placeHolder","onLoad","onError","showDefaultComponent","setShowDefaultComponent","useState","showPlaceHolder","setShowPlaceHolder","DefaultComponent","useMemo","PlaceHolder","style","minWidth","maxWidth","position","display","justifyContent","alignItems","HiddenImageLoader","React","Array","isArray","join","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","borderRadius","propTypes","PropTypes","oneOfType","arrayOf","string","isRequired","number","bool","element","func","defaultProps"],"mappings":"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"}