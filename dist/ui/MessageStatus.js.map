{"version":3,"file":"MessageStatus.js","sources":["../../src/ui/MessageStatus/index.tsx"],"sourcesContent":["import './index.scss';\nimport React, { useMemo } from 'react';\nimport format from 'date-fns/format';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { GroupChannel } from '@sendbird/chat/groupChannel';\n\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Loader from '../Loader';\n\nimport {\n  getOutgoingMessageState,\n  getOutgoingMessageStates,\n  isSentStatus,\n} from '../../utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\n\nexport const MessageStatusTypes = getOutgoingMessageStates();\n\ninterface MessageStatusProps {\n  className?: string;\n  message: UserMessage | FileMessage;\n  channel: GroupChannel;\n}\n\nexport default function MessageStatus({\n  className,\n  message,\n  channel,\n}: MessageStatusProps): React.ReactElement {\n  const { dateLocale } = useLocalization();\n  const status = useMemo(() => (\n    getOutgoingMessageState(channel, message)\n  ), [channel?.getUnreadMemberCount?.(message), channel?.getUndeliveredMemberCount?.(message)]);\n  const hideMessageStatusIcon = channel?.isGroupChannel() && (\n    (channel.isSuper || channel.isPublic || channel.isBroadcast)\n    && !(status === MessageStatusTypes.PENDING || status === MessageStatusTypes.FAILED)\n  );\n  const iconType = {\n    [MessageStatusTypes.SENT]: IconTypes.DONE,\n    [MessageStatusTypes.DELIVERED]: IconTypes.DONE_ALL,\n    [MessageStatusTypes.READ]: IconTypes.DONE_ALL,\n    [MessageStatusTypes.FAILED]: IconTypes.ERROR,\n  };\n  const iconColor = {\n    [MessageStatusTypes.SENT]: IconColors.SENT,\n    [MessageStatusTypes.DELIVERED]: IconColors.SENT,\n    [MessageStatusTypes.READ]: IconColors.READ,\n    [MessageStatusTypes.FAILED]: IconColors.ERROR,\n  };\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-message-status',\n      ].join(' ')}\n    >\n      {(status === MessageStatusTypes.PENDING) ? (\n        <Loader\n          className=\"sendbird-message-status__icon\"\n          width=\"16px\"\n          height=\"16px\"\n        >\n          <Icon\n            type={IconTypes.SPINNER}\n            fillColor={IconColors.PRIMARY}\n            width=\"16px\"\n            height=\"16px\"\n          />\n        </Loader>\n      ) : (\n        <Icon\n          className={`sendbird-message-status__icon ${hideMessageStatusIcon ? 'hide-icon' : ''}`}\n          type={iconType[status] || IconTypes.ERROR}\n          fillColor={iconColor[status]}\n          width=\"16px\"\n          height=\"16px\"\n        />\n      )}\n      {isSentStatus(status) && (\n        <Label\n          className=\"sendbird-message-status__text\"\n          type={LabelTypography.CAPTION_3}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {format(message?.createdAt || 0, 'p', {\n            locale: dateLocale,\n          })}\n        </Label>\n      )}\n    </div>\n  );\n}\n"],"names":["MessageStatusTypes","getOutgoingMessageStates","MessageStatus","_a","className","message","channel","dateLocale","useLocalization","status","useMemo","getOutgoingMessageState","getUnreadMemberCount","getUndeliveredMemberCount","hideMessageStatusIcon","isGroupChannel","isSuper","isPublic","isBroadcast","PENDING","FAILED","iconType","_b","SENT","IconTypes","DONE","DELIVERED","DONE_ALL","READ","ERROR","iconColor","_c","IconColors","React","__spreadArray","Array","isArray","join","SPINNER","PRIMARY","isSentStatus","LabelTypography","CAPTION_3","LabelColors","ONBACKGROUND_2","format","createdAt","locale"],"mappings":"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"}