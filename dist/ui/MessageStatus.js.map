{"version":3,"file":"MessageStatus.js","sources":["../../src/ui/MessageStatus/index.tsx"],"sourcesContent":["import './index.scss';\nimport React, { useMemo } from 'react';\nimport format from 'date-fns/format';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { GroupChannel } from '@sendbird/chat/groupChannel';\n\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Loader from '../Loader';\n\nimport {\n  getOutgoingMessageState,\n  getOutgoingMessageStates,\n  isSentStatus,\n} from '../../utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\n\nexport const MessageStatusTypes = getOutgoingMessageStates();\n\ninterface MessageStatusProps {\n  className?: string;\n  message: UserMessage | FileMessage;\n  channel: GroupChannel;\n}\n\nexport default function MessageStatus({\n  className,\n  message,\n  channel,\n}: MessageStatusProps): React.ReactElement {\n  const { dateLocale } = useLocalization();\n  const status = useMemo(() => (\n    getOutgoingMessageState(channel, message)\n  ), [channel?.getUnreadMemberCount?.(message), channel?.getUndeliveredMemberCount?.(message)]);\n  const hideMessageStatusIcon = channel?.isGroupChannel() && (\n    (channel.isSuper || channel.isPublic || channel.isBroadcast)\n    && !(status === MessageStatusTypes.PENDING || status === MessageStatusTypes.FAILED)\n  );\n  const iconType = {\n    [MessageStatusTypes.SENT]: IconTypes.DONE,\n    [MessageStatusTypes.DELIVERED]: IconTypes.DONE_ALL,\n    [MessageStatusTypes.READ]: IconTypes.DONE_ALL,\n    [MessageStatusTypes.FAILED]: IconTypes.ERROR,\n  };\n  const iconColor = {\n    [MessageStatusTypes.SENT]: IconColors.SENT,\n    [MessageStatusTypes.DELIVERED]: IconColors.SENT,\n    [MessageStatusTypes.READ]: IconColors.READ,\n    [MessageStatusTypes.FAILED]: IconColors.ERROR,\n  };\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-message-status',\n      ].join(' ')}\n    >\n      {(status === MessageStatusTypes.PENDING) ? (\n        <Loader\n          className=\"sendbird-message-status__icon\"\n          width=\"16px\"\n          height=\"16px\"\n        >\n          <Icon\n            type={IconTypes.SPINNER}\n            fillColor={IconColors.PRIMARY}\n            width=\"16px\"\n            height=\"16px\"\n          />\n        </Loader>\n      ) : (\n        <Icon\n          className={`sendbird-message-status__icon ${hideMessageStatusIcon ? 'hide-icon' : ''}`}\n          type={iconType[status] || IconTypes.ERROR}\n          fillColor={iconColor[status]}\n          width=\"16px\"\n          height=\"16px\"\n        />\n      )}\n      {isSentStatus(status) && (\n        <Label\n          className=\"sendbird-message-status__text\"\n          type={LabelTypography.CAPTION_3}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {format(message?.createdAt || 0, 'p', {\n            locale: dateLocale,\n          })}\n        </Label>\n      )}\n    </div>\n  );\n}\n"],"names":["MessageStatusTypes","getOutgoingMessageStates","MessageStatus","_a","className","message","channel","dateLocale","useLocalization","status","useMemo","getOutgoingMessageState","getUnreadMemberCount","_d","call","getUndeliveredMemberCount","_e","hideMessageStatusIcon","isGroupChannel","isSuper","isPublic","isBroadcast","PENDING","FAILED","iconType","_b","SENT","IconTypes","DONE","DELIVERED","DONE_ALL","READ","ERROR","iconColor","_c","IconColors","React","__spreadArray","Array","isArray","join","SPINNER","PRIMARY","isSentStatus","LabelTypography","CAPTION_3","LabelColors","ONBACKGROUND_2","format","createdAt","locale"],"mappings":"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"}