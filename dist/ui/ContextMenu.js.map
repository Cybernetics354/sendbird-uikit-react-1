{"version":3,"file":"ContextMenu.js","sources":["../../src/ui/ContextMenu/items/MenuItems.jsx","../../src/ui/ContextMenu/items/EmojiListItems.jsx","../../src/ui/ContextMenu/index.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class MenuItems extends Component {\n  constructor(props) {\n    super(props);\n    this.menuRef = React.createRef();\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getMenuPosition();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getMenuPosition = () => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef.current.getBoundingClientRect();\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.menuRef.current) return menuStyle;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n\n    return this.setState({ menuStyle });\n  }\n\n  render() {\n    const { menuStyle } = this.state;\n    const { children, style } = this.props;\n    return (\n      createPortal(\n        (\n          <>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className=\"sendbird-dropdown__menu\"\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\nMenuItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  style: PropTypes.shape({}),\n  // https://stackoverflow.com/a/51127130\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  // parentContainRef: PropTypes.oneOfType([\n  //   PropTypes.func,\n  //   PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  // ]).isRequired,\n  openLeft: PropTypes.bool,\n};\nMenuItems.defaultProps = {\n  style: {},\n  openLeft: false,\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport SortByRow from '../../SortByRow';\n\nexport default class EmojiListItems extends Component {\n  constructor(props) {\n    super(props);\n    this.reactionRef = React.createRef();\n    this.state = {\n      reactionStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getBarPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-reactions--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-reactions--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { reactionRef } = this;\n    const handleClickOutside = (event) => {\n      if (reactionRef.current && !reactionRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getBarPosition = () => {\n    // calculate the location that the context menu should be\n    const {\n      parentRef,\n      spaceFromTrigger,\n    } = this.props;\n    const spaceFromTriggerX = spaceFromTrigger.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger.y || 0;\n\n    const parentRect = parentRef.current.getBoundingClientRect();\n\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.reactionRef.current) return reactionStyle;\n    const rect = this.reactionRef.current.getBoundingClientRect();\n\n    if (reactionStyle.top < rect.height) {\n      reactionStyle.top += parentRect.height;\n      reactionStyle.top += spaceFromTriggerY;\n    } else {\n      reactionStyle.top -= rect.height;\n      reactionStyle.top -= spaceFromTriggerY;\n    }\n\n    reactionStyle.left -= (rect.width / 2);\n    reactionStyle.left += (parentRect.height / 2) - 2;\n    reactionStyle.left += spaceFromTriggerX;\n\n    const maximumLeft = (window.innerWidth - rect.width);\n    if (maximumLeft < reactionStyle.left) {\n      reactionStyle.left = maximumLeft;\n    }\n    if (reactionStyle.left < 0) {\n      reactionStyle.left = 0;\n    }\n\n    return this.setState({ reactionStyle });\n  }\n\n  render() {\n    const { reactionStyle } = this.state;\n    const { children } = this.props;\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={this.reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        document.getElementById('sendbird-emoji-list-portal'),\n      )\n    );\n  }\n}\nEmojiListItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  spaceFromTrigger: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n};\nEmojiListItems.defaultProps = {\n  spaceFromTrigger: {},\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { getClassName } from '../../utils';\n\nimport MenuItems_ from './items/MenuItems';\nimport EmojiListItems_ from './items/EmojiListItems';\n\nconst ENTER = 13;\n\nexport const MenuItems = MenuItems_;\nexport const EmojiListItems = EmojiListItems_;\n\nexport const MenuItem = ({\n  className,\n  children,\n  onClick,\n  disable,\n}) => {\n  const handleClickEvent = (e) => { if (!disable) onClick(e); };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER) handleClickEvent(e); }}\n      tabIndex={0}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nMenuItem.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  disable: PropTypes.bool,\n};\n\nMenuItem.defaultProps = {\n  className: '',\n  disable: false,\n};\n\n// Root components should be appended before ContextMenu is rendered\nexport const MenuRoot = () => (\n  <div id=\"sendbird-dropdown-portal\" />\n);\nexport const EmojiReactionListRoot = () => (\n  <div id=\"sendbird-emoji-list-portal\" />\n);\n\nexport default function ContextMenu({ menuTrigger, menuItems }) {\n  const [showMenu, setShowMenu] = useState(false);\n\n  return (\n    <div className=\"sendbird-context-menu\" style={{ display: 'inline' }}>\n      {menuTrigger(() => setShowMenu(!showMenu))}\n      {showMenu && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n\nContextMenu.propTypes = {\n  menuTrigger: PropTypes.func.isRequired,\n  menuItems: PropTypes.func.isRequired,\n};\n"],"names":["MenuItems","Component","constructor","props","closeDropdown","menuRef","handleClickOutside","event","current","contains","target","setState","document","addEventListener","state","removeEventListener","parentRef","openLeft","parentRect","getBoundingClientRect","x","left","y","top","menuStyle","innerWidth","innerHeight","window","rect","height","width","padding","Number","isNaN","React","createRef","componentDidMount","setupEvents","getMenuPosition","componentWillUnmount","cleanUpEvents","render","children","style","createPortal","display","position","Math","round","getElementById","propTypes","PropTypes","func","isRequired","oneOfType","element","arrayOf","shape","instanceOf","Element","bool","defaultProps","EmojiListItems","parentContainRef","classList","add","remove","reactionRef","spaceFromTrigger","spaceFromTriggerX","spaceFromTriggerY","reactionStyle","maximumLeft","getBarPosition","showParent","hideParent","number","ENTER","MenuItems_","EmojiListItems_","MenuItem","className","onClick","disable","handleClickEvent","e","getClassName","keyCode","LabelTypography","SUBTITLE_2","LabelColors","ONBACKGROUND_4","ONBACKGROUND_1","string","MenuRoot","EmojiReactionListRoot","ContextMenu","menuTrigger","menuItems","showMenu","setShowMenu","useState"],"mappings":"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"}