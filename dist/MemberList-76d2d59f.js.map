{"version":3,"file":"MemberList-76d2d59f.js","sources":["../src/smart-components/ChannelSettings/components/ModerationPanel/MembersModal.tsx","../src/smart-components/ChannelSettings/components/ModerationPanel/InviteUsersModal.tsx","../src/smart-components/ChannelSettings/components/ModerationPanel/MemberList.tsx"],"sourcesContent":["import React, {\n  ReactElement,\n  useEffect,\n  useState,\n} from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport UserListItem from '../../../../ui/UserListItem';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\nimport { noop } from '../../../../utils/utils';\n\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n}\n\nexport default function MembersModal({ onCancel }: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [memberQuery, setMemberQuery] = useState(null);\n\n  const { channel } = useChannelSettingsContext();\n  const state = useSendbirdStateContext();\n  const currentUser = state?.config?.userId;\n\n  useEffect(() => {\n    const memberListQuery = channel?.createMemberListQuery({\n      limit: 20,\n    });\n    memberListQuery.next().then((members) => {\n      setMembers(members);\n    });\n    setMemberQuery(memberListQuery);\n  }, [])\n  return (\n    <div>\n      <Modal\n        hideFooter\n        onCancel={() => onCancel()}\n        onSubmit={noop}\n        titleText=\"All Members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = memberQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n\n            if (hasNext && fetchMore) {\n              memberQuery.next().then((o) => {\n                setMembers([\n                  ...members,\n                  ...o,\n                ])\n              });\n            }\n          }}\n        >\n          { members.map((member) => (\n            <UserListItem\n              user={member}\n              key={member.userId}\n              currentUser={currentUser}\n              action={({ parentRef, actionRef }) => (\n                <>\n                  {channel?.myRole === 'operator' && (\n                    <ContextMenu\n                      menuTrigger={(toggleDropdown) => (\n                        <IconButton\n                          className=\"sendbird-user-message__more__menu\"\n                          width=\"32px\"\n                          height=\"32px\"\n                          onClick={toggleDropdown}\n                        >\n                          <Icon\n                            width=\"24px\"\n                            height=\"24px\"\n                            type={IconTypes.MORE}\n                            fillColor={IconColors.CONTENT_INVERSE}\n                          />\n                        </IconButton>\n                      )}\n                      menuItems={(closeDropdown) => (\n                        <MenuItems\n                          parentContainRef={parentRef}\n                          parentRef={actionRef} // for catching location(x, y) of MenuItems\n                          closeDropdown={closeDropdown}\n                          openLeft\n                        >\n                          <MenuItem\n                            onClick={() => {\n                              if ((member.role !== 'operator')) {\n                                channel?.addOperators([member.userId]).then(() => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: 'operator',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              } else {\n                                channel?.removeOperators([member.userId]).then(() => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: '',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              }\n                            }}\n                          >\n                            { member.role !== 'operator' ? 'Register as operator' : 'Unregister operator'}\n                          </MenuItem>\n                          {\n                            // No muted members in broadcast channel\n                            !channel?.isBroadcast && (\n                              <MenuItem\n                                onClick={() => {\n                                  if (member.isMuted) {\n                                    channel?.unmuteUser(member).then(() => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: false,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    })\n                                  } else {\n                                    channel?.muteUser(member).then(() => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: true,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    });\n                                  }\n                                }}\n                              >\n                                { member.isMuted ? 'Unmute' : 'Mute' }\n                              </MenuItem>\n                            )\n                          }\n                          <MenuItem\n                            onClick={() => {\n                              channel?.banUser(member, -1, '').then(() => {\n                                setMembers(members.filter(({ userId }) => {\n                                  return userId !== member.userId;\n                                }));\n                              });\n                            }}\n                          >\n                            Ban\n                          </MenuItem>\n                        </MenuItems>\n                      )}\n                    />\n                  )}\n                </>\n              )}\n            />\n          ))}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { ReactElement, useEffect, useState } from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport { Type as ButtonType } from '../../../../ui/Button/type';\nimport UserListItem from '../../../../ui/UserListItem';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n  onSubmit(members: Array<string>): void;\n}\n\nexport default function InviteUsers({\n  onCancel,\n  onSubmit,\n}: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [selectedMembers, setSelectedMembers] = useState({});\n  const [userQuery, setUserQuery] = useState(null);\n\n  const state = useSendbirdStateContext();\n  const sdk = state?.stores?.sdkStore?.sdk;\n\n  const { channel } = useChannelSettingsContext();\n\n  useEffect(() => {\n    const userListQuery = sdk?.createApplicationUserListQuery();\n    userListQuery.next().then((members) => {\n      setMembers(members);\n    });\n    setUserQuery(userListQuery);\n  }, [sdk])\n  return (\n    <div>\n      <Modal\n        disabled={Object.keys(selectedMembers).length === 0}\n        submitText=\"Invite\"\n        type={ButtonType.PRIMARY}\n        onCancel={() => onCancel()}\n        onSubmit={() => {\n          const members = Object.keys(selectedMembers).filter((m) => selectedMembers[m]);\n          channel?.inviteWithUserIds(members).then(() => {\n            onSubmit(members);\n          });\n        }}\n        titleText=\"Select members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = userQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n            if (hasNext && fetchMore) {\n              userQuery.next().then((users) => {\n                setMembers([\n                  ...members,\n                  ...users,\n                ])\n              });\n            }\n          }}\n        >\n          <div className=\"sendbird-more-members__popup-scroll__inner\">\n            { members.map((member) => (\n              <UserListItem\n                checkBox\n                checked={selectedMembers[member.userId]}\n                onChange={\n                  (event) => {\n                    const modifiedSelectedMembers = {\n                      ...selectedMembers,\n                      [event.target.id]: event.target.checked,\n                    };\n                    if (!event.target.checked) {\n                      delete modifiedSelectedMembers[event.target.id];\n                    }\n                    setSelectedMembers(modifiedSelectedMembers);\n                  }\n                }\n                user={member}\n                key={member.userId}\n              />\n            ))}\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, {\n  ReactElement,\n  useEffect,\n  useState,\n  useCallback,\n} from 'react';\n\nimport Button, { ButtonTypes, ButtonSizes } from '../../../../ui/Button';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\n\nimport UserListItem from '../UserListItem';\nimport MembersModal from './MembersModal';\nimport InviteUsers from './InviteUsersModal';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport uuidv4 from '../../../../utils/uuid';\n\nexport const MemberList = (): ReactElement => {\n  const [members, setMembers] = useState([]);\n  const [hasNext, setHasNext] = useState(false);\n  const [showAllMembers, setShowAllMembers] = useState(false);\n  const [showInviteUsers, setShowInviteUsers] = useState(false);\n\n  const state = useSendbirdStateContext();\n  const {\n    channel,\n    setChannelUpdateId,\n  } = useChannelSettingsContext();\n\n  const sdk = state?.stores?.sdkStore?.sdk;\n  const userId = state?.config?.userId;\n\n  useEffect(() => {\n    if (!channel) {\n      setMembers([]);\n      return;\n    }\n\n    const memberUserListQuery = channel?.createMemberListQuery({\n      limit: 10,\n    });\n    memberUserListQuery.next().then((members) => {\n      setMembers(members);\n      setHasNext(memberUserListQuery.hasNext);\n    });\n  }, [channel]);\n\n  const refershList = useCallback(\n    () => {\n      if (!channel) {\n        setMembers([]);\n        return;\n      }\n      const memberUserListQuery = channel?.createMemberListQuery({\n        limit: 10,\n      });\n      memberUserListQuery.next().then((members) => {\n        setMembers(members);\n        setHasNext(memberUserListQuery.hasNext);\n        setChannelUpdateId(uuidv4());\n      });\n    },\n    [channel],\n  );\n\n  return (\n    <>\n      {\n        members.map((member) => (\n          <UserListItem\n            key={member.userId}\n            user={member}\n            currentUser={sdk.currentUser.userId}\n            action={\n              (userId !== member.userId)\n                ? ({ actionRef, parentRef }) => (\n                  <ContextMenu\n                    menuTrigger={(toggleDropdown) => (\n                      <IconButton\n                        className=\"sendbird-user-message__more__menu\"\n                        width=\"32px\"\n                        height=\"32px\"\n                        onClick={toggleDropdown}\n                      >\n                        <Icon\n                          width=\"24px\"\n                          height=\"24px\"\n                          type={IconTypes.MORE}\n                          fillColor={IconColors.CONTENT_INVERSE}\n                        />\n                      </IconButton>\n                    )}\n                    menuItems={(closeDropdown) => (\n                      <MenuItems\n                        parentContainRef={parentRef}\n                        parentRef={actionRef} // for catching location(x, y) of MenuItems\n                        closeDropdown={closeDropdown}\n                        openLeft\n                      >\n                        <MenuItem\n                          onClick={() => {\n                            if ((member.role !== 'operator')) {\n                              channel?.addOperators([member.userId]).then(() => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            } else {\n                              channel?.removeOperators([member.userId]).then(() => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            }\n                          }}\n                        >\n                          {member.role !== 'operator' ? 'Register as operator' : 'Unregister operator'}\n                        </MenuItem>\n                        {\n                          // No muted members in broadcast channel\n                          !channel?.isBroadcast && (\n                            <MenuItem\n                              onClick={() => {\n                                if (member.isMuted) {\n                                  channel?.unmuteUser(member).then(() => {\n                                    refershList();\n                                    closeDropdown();\n                                  })\n                                } else {\n                                  channel?.muteUser(member).then(() => {\n                                    refershList();\n                                    closeDropdown();\n                                  });\n                                }\n                              }}\n                            >\n                              { member.isMuted ? 'Unmute' : 'Mute'}\n                            </MenuItem>\n                          )\n                        }\n                        <MenuItem\n                          onClick={() => {\n                            channel?.banUser(member, -1, '').then(() => {\n                              refershList();\n                              closeDropdown();\n                            });\n                          }}\n                        >\n                          Ban\n                    </MenuItem>\n                      </MenuItems>\n                    )}\n                  />\n                )\n                : null\n            }\n          />\n        ))\n      }\n      <div\n        className=\"sendbird-channel-settings-accordion__footer\"\n      >\n        {\n          hasNext && (\n            <Button\n              type={ButtonTypes.SECONDARY}\n              size={ButtonSizes.SMALL}\n              onClick={() => setShowAllMembers(true)}\n            >\n              All members\n            </Button>\n          )\n        }\n        <Button\n          type={ButtonTypes.SECONDARY}\n          size={ButtonSizes.SMALL}\n          onClick={() => setShowInviteUsers(true)}\n        >\n          Invite members\n        </Button>\n      </div>\n      {\n        showAllMembers && (\n          <MembersModal\n            onCancel={() => {\n              setShowAllMembers(false);\n              refershList();\n            }}\n          />\n        )\n      }\n      {\n        showInviteUsers && (\n          <InviteUsers\n            onSubmit={() => {\n              setShowInviteUsers(false);\n              refershList();\n            }}\n            onCancel={() => setShowInviteUsers(false)}\n          />\n        )\n      }\n    </>\n  );\n}\n\nexport default MemberList;\n"],"names":["MembersModal","_a","onCancel","_c","useState","members","setMembers","_d","memberQuery","setMemberQuery","channel","useChannelSettingsContext","state","useSendbirdStateContext","currentUser","config","userId","useEffect","memberListQuery","createMemberListQuery","limit","next","then","React","noop","e","hasNext","target","fetchMore","clientHeight","scrollTop","scrollHeight","o","map","member","parentRef","actionRef","myRole","toggleDropdown","IconTypes","MORE","IconColors","CONTENT_INVERSE","closeDropdown","role","addOperators","m","removeOperators","isBroadcast","isMuted","unmuteUser","muteUser","banUser","filter","InviteUsers","onSubmit","_e","selectedMembers","setSelectedMembers","_f","userQuery","setUserQuery","sdk","stores","sdkStore","userListQuery","createApplicationUserListQuery","Object","keys","length","ButtonType","PRIMARY","inviteWithUserIds","users","event","modifiedSelectedMembers","id","checked","MemberList","setHasNext","showAllMembers","setShowAllMembers","_g","showInviteUsers","setShowInviteUsers","_h","setChannelUpdateId","memberUserListQuery","refershList","useCallback","uuidv4","UserListItem","ButtonTypes","SECONDARY","ButtonSizes","SMALL"],"mappings":"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"}