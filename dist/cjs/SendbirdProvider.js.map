{"version":3,"file":"SendbirdProvider.js","sources":["../../src/lib/dux/sdk/actionTypes.js","../../src/lib/dux/sdk/thunks.js","../../src/lib/hooks/useTheme.ts","../../src/lib/dux/sdk/initialState.js","../../src/lib/dux/sdk/reducers.js","../../src/lib/dux/user/initialState.js","../../src/lib/dux/user/reducers.js","../../src/lib/hooks/useOnlineStatus.js","../../src/lib/Logger/index.js","../../src/lib/pubSub/index.js","../../src/hooks/useAppendDomNode.js","../../src/lib/Sendbird.jsx"],"sourcesContent":["export const INIT_SDK = 'INIT_SDK';\nexport const SET_SDK_LOADING = 'SET_SDK_LOADING';\nexport const RESET_SDK = 'RESET_SDK';\nexport const SDK_ERROR = 'SDK_ERROR';\n","import SendbirdChat from '@sendbird/chat';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\n\nimport {\n  INIT_SDK,\n  SET_SDK_LOADING,\n  RESET_SDK,\n  SDK_ERROR,\n} from './actionTypes';\nimport { INIT_USER, UPDATE_USER_INFO, RESET_USER } from '../user/actionTypes';\nimport { isTextuallyNull } from '../../../utils';\n\nconst APP_VERSION_STRING = '__uikit_app_version__';\nconst IS_ROLLUP = '__is_rollup__';\nconst IS_ROLLUP_REPLACE = '__is_rollup_replace__';\n\nexport const disconnectSdk = ({\n  sdkDispatcher,\n  userDispatcher,\n  sdk,\n  onDisconnect,\n}) => {\n  sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n  if (sdk && sdk.disconnect) {\n    sdk.disconnect()\n      .then(() => {\n        sdkDispatcher({ type: RESET_SDK });\n        userDispatcher({ type: RESET_USER });\n      })\n      .finally(() => {\n        onDisconnect();\n      });\n  } else {\n    onDisconnect();\n  }\n};\n\nexport const handleConnection = ({\n  userId,\n  appId,\n  nickname,\n  profileUrl,\n  accessToken,\n  configureSession,\n  sdk,\n  logger,\n}, dispatchers) => {\n  const {\n    sdkDispatcher,\n    userDispatcher,\n  } = dispatchers;\n  disconnectSdk({\n    sdkDispatcher,\n    userDispatcher,\n    sdk,\n    logger,\n    onDisconnect: () => {\n      logger.info('Setup connection');\n      let sessionHandler = null;\n      sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n      if (userId && appId) {\n        const newSdk = SendbirdChat.init({\n          appId,\n          modules: [\n            new GroupChannelModule(),\n            new OpenChannelModule(),\n          ],\n        });\n        if (configureSession && typeof configureSession === 'function') {\n          sessionHandler = configureSession(newSdk);\n        }\n        // to check if code is released version from rollup and *not from storybook*\n        // see rollup config file\n        if (IS_ROLLUP === IS_ROLLUP_REPLACE) {\n          newSdk.addExtension('sb_uikit', APP_VERSION_STRING);\n        }\n        const connectCbSucess = (user) => {\n          sdkDispatcher({ type: INIT_SDK, payload: newSdk });\n          userDispatcher({ type: INIT_USER, payload: user });\n          // use nickname/profileUrl if provided\n          // or set userID as nickname\n          if ((nickname !== user.nickname || profileUrl !== user.profileUrl)\n            && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))\n          ) {\n            newSdk.updateCurrentUserInfo({\n              nickname: nickname || user.nickname,\n              profileUrl: profileUrl || user.profileUrl,\n            }).then((namedUser) => {\n              userDispatcher({ type: UPDATE_USER_INFO, payload: namedUser });\n            });\n          }\n        };\n\n        const connectCbError = (e) => {\n          logger.error('Connection failed', `${e}`);\n          sdkDispatcher({ type: RESET_SDK });\n          sdkDispatcher({ type: RESET_USER });\n          sdkDispatcher({ type: SDK_ERROR });\n        };\n\n        if (accessToken) {\n          newSdk.connect(userId, accessToken)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        } else {\n          if (sessionHandler) {\n            newSdk.setSessionHandler(sessionHandler);\n          }\n          newSdk.connect(userId)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        }\n      } else {\n        sdkDispatcher({ type: SDK_ERROR });\n        logger.warning('Connection failed', 'UserId or appId missing');\n      }\n    },\n  });\n};\n","import { useLayoutEffect } from 'react';\nimport cssVars from 'css-vars-ponyfill';\n\nconst isEmpty = (obj) => {\n  if (obj === null || obj === undefined) {\n    return true;\n  }\n\n  for (const prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return JSON.stringify(obj) === JSON.stringify({});\n}\n\nconst useTheme = (overrides: Record<string, string>): void => {\n  useLayoutEffect(() => {\n    if (!isEmpty(overrides)) {\n      cssVars({\n        variables: {\n          ...{\n            '--sendbird-dark-primary-500': '#4d2aa6',\n            '--sendbird-dark-primary-400': '#6440C4',\n            '--sendbird-dark-primary-300': '#7B53EF',\n            '--sendbird-dark-primary-200': '#9E8CF5',\n            '--sendbird-dark-primary-100': '#E2DFFF',\n\n            '--sendbird-dark-secondary-500': '#007A7A',\n            '--sendbird-dark-secondary-400': '#189A8D',\n            '--sendbird-dark-secondary-300': '#2EBA9F',\n            '--sendbird-dark-secondary-200': '#6FD6BE',\n            '--sendbird-dark-secondary-100': '#AEF2DC',\n\n            '--sendbird-dark-information-100': '#b2d9ff',\n\n            '--sendbird-dark-error-500': '#A30E2D',\n            '--sendbird-dark-error-400': '#C11F41',\n            '--sendbird-dark-error-300': '#E53157',\n            '--sendbird-dark-error-200': '#FF6183',\n            '--sendbird-dark-error-100': '#FFABBD',\n\n            '--sendbird-dark-background-700': '#000000',\n            '--sendbird-dark-background-600': '#161616',\n            '--sendbird-dark-background-500': '#2C2C2C',\n            '--sendbird-dark-background-400': '#393939',\n            '--sendbird-dark-background-300': '#A8A8A8',\n            '--sendbird-dark-background-200': '#D9D9D9',\n            '--sendbird-dark-background-100': '#F0F0F0',\n            '--sendbird-dark-background-50': '#FFFFFF',\n\n            '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-primary-500': '#4d2aa6',\n            '--sendbird-light-primary-400': '#6440C4',\n            '--sendbird-light-primary-300': '#7B53EF',\n            '--sendbird-light-primary-200': '#9E8CF5',\n            '--sendbird-light-primary-100': '#E2DFFF',\n\n            '--sendbird-light-secondary-500': '#007A7A',\n            '--sendbird-light-secondary-400': '#189A8D',\n            '--sendbird-light-secondary-300': '#2EBA9F',\n            '--sendbird-light-secondary-200': '#6FD6BE',\n            '--sendbird-light-secondary-100': '#AEF2DC',\n\n            '--sendbird-light-information-100': '#b2d9ff',\n\n            '--sendbird-light-error-500': '#A30E2D',\n            '--sendbird-light-error-400': '#C11F41',\n            '--sendbird-light-error-300': '#E53157',\n            '--sendbird-light-error-200': '#FF6183',\n            '--sendbird-light-error-100': '#FFABBD',\n\n            '--sendbird-light-background-700': '#000000',\n            '--sendbird-light-background-600': '#161616',\n            '--sendbird-light-background-500': '#2C2C2C',\n            '--sendbird-light-background-400': '#393939',\n            '--sendbird-light-background-300': '#A8A8A8',\n            '--sendbird-light-background-200': '#D9D9D9',\n            '--sendbird-light-background-100': '#F0F0F0',\n            '--sendbird-light-background-50': ' #FFFFFF',\n\n            '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n          },\n          ...overrides,\n        },\n      });\n    }\n  }, [overrides]);\n};\n\nexport default useTheme;\n","export default {\n  initialized: false,\n  loading: false,\n  sdk: {},\n  error: false,\n};\n","import * as sdkActions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case sdkActions.SET_SDK_LOADING:\n      return {\n        ...state,\n        initialized: false,\n        loading: action.payload,\n      };\n    case sdkActions.SDK_ERROR:\n      return {\n        ...state,\n        initialized: false,\n        loading: false,\n        error: true,\n      };\n    case sdkActions.INIT_SDK:\n      return {\n        sdk: action.payload,\n        initialized: true,\n        loading: false,\n        error: false,\n      };\n    case sdkActions.RESET_SDK:\n      return initialState;\n    default:\n      return state;\n  }\n}\n","export default {\n  initialized: false,\n  loading: false,\n  user: {},\n};\n","import * as actions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case actions.INIT_USER:\n      return {\n        initialized: true,\n        loading: false,\n        user: action.payload,\n      };\n    case actions.RESET_USER:\n      return initialState;\n    case actions.UPDATE_USER_INFO:\n      return {\n        ...state,\n        user: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import { ConnectionHandler } from '@sendbird/chat';\nimport { useState, useEffect } from 'react';\n\nimport { uuidv4 } from '../../utils/uuid';\n\nfunction useConnectionStatus(sdk, logger) {\n  const [isOnline, setIsOnline] = useState(true);\n\n  useEffect(() => {\n    const uniqueHandlerId = uuidv4();\n    logger.warning('sdk changed', uniqueHandlerId);\n    const handler = new ConnectionHandler();\n\n    handler.onReconnectStarted = () => {\n      setIsOnline(false);\n      logger.warning('onReconnectStarted', { isOnline });\n    };\n    handler.onReconnectSucceeded = () => {\n      setIsOnline(true);\n      logger.warning('onReconnectSucceeded', { isOnline });\n    };\n    handler.onReconnectFailed = () => {\n      sdk.reconnect();\n      logger.warning('onReconnectFailed');\n    };\n    logger.info('Added ConnectionHandler', uniqueHandlerId);\n\n    if (sdk?.addConnectionHandler) {\n      sdk.addConnectionHandler(uniqueHandlerId, handler);\n    }\n    return () => {\n      try {\n        sdk.removeConnectionHandler(uniqueHandlerId);\n        logger.info('Removed ConnectionHandler', uniqueHandlerId);\n      } catch {\n        //\n      }\n    };\n  }, [sdk]);\n\n  useEffect(() => {\n    const tryReconnect = () => {\n      try {\n        logger.warning('Try reconnecting SDK');\n        if (sdk.connectionState !== 'OPEN') { // connection is not broken yet\n          sdk.reconnect();\n        }\n      } catch {\n        //\n      }\n    };\n    // addEventListener version\n    window.addEventListener('online', tryReconnect);\n    return () => {\n      window.removeEventListener('online', tryReconnect);\n    };\n  }, [sdk]);\n\n  // add offline-class to body\n  useEffect(() => {\n    const body = document.querySelector('body');\n    if (!isOnline) {\n      try {\n        body.classList.add('sendbird__offline');\n        logger.info('Added class sendbird__offline to body');\n      } catch (e) {\n        //\n      }\n    } else {\n      try {\n        body.classList.remove('sendbird__offline');\n        logger.info('Removed class sendbird__offline from body');\n      } catch (e) {\n        //\n      }\n    }\n  }, [isOnline]);\n\n  return isOnline;\n}\n\nexport default useConnectionStatus;\n","// Logger, pretty much explains it\n// in SendbirdProvider\n// const [logger, setLogger] = useState(LoggerFactory(logLevel));\nexport const LOG_LEVELS = {\n  DEBUG: 'debug',\n  WARNING: 'warning',\n  ERROR: 'error',\n  INFO: 'info',\n  ALL: 'all',\n};\n\nconst colorLog = (level) => {\n  switch (level) {\n    case LOG_LEVELS.WARNING:\n      return ('color: Orange');\n    case LOG_LEVELS.ERROR:\n      return ('color: Red');\n    default:\n      return ('color: Gray');\n  }\n};\n\nexport const printLog = ({\n  level,\n  title,\n  description = '',\n}) => {\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c SendbirdUIKit | ${level} | ${new Date().toISOString()} | ${title} ${description && '|'}`, colorLog(level),\n    description,\n  );\n};\n\nexport const getDefaultLogger = () => ({\n  info: () => {},\n  error: () => {},\n  warning: () => {},\n});\n\nexport const LoggerFactory = (lvl, customInterface) => {\n  const logInterface = customInterface || printLog;\n  const lvlArray = Array.isArray(lvl) ? lvl : [lvl];\n\n  const applyLog = (lgLvl) => (title, description) => logInterface({\n    level: lgLvl,\n    title,\n    description,\n  });\n\n  const logger = lvlArray.reduce((accumulator, currentLvl) => {\n    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n        error: applyLog(LOG_LEVELS.ERROR),\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.INFO) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.ERROR) {\n      return ({\n        ...accumulator,\n        error: applyLog(LOG_LEVELS.ERROR),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.WARNING) {\n      return ({\n        ...accumulator,\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    return { ...accumulator };\n  }, getDefaultLogger());\n  return logger;\n};\n","// https://davidwalsh.name/pubsub-javascript\n// we use pubsub to sync events between multiple components(example - ChannelList, Channel)\n// for example, if customer sends a message from their custom component\n// without pubsub,we would not be able to listen to it\n// in our ChannelList or Conversation\nexport default () => {\n  const topics = {};\n  const hOP = topics.hasOwnProperty;\n\n  return {\n    __getTopics: () => topics,\n    subscribe: (topic, listener) => {\n      // Create the topic's object if not yet created\n      if (!hOP.call(topics, topic)) { topics[topic] = []; }\n\n      // Add the listener to queue\n      const index = topics[topic].push(listener) - 1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: () => {\n          delete topics[topic][index];\n        },\n      };\n    },\n    publish: (topic, info) => {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if (!hOP.call(topics, topic)) { return; }\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach((item) => {\n        item(info !== undefined ? info : {});\n      });\n    },\n  };\n};\n","import { useEffect } from 'react';\n\nfunction useAppendDomNode(ids = [], rootSelector) {\n  useEffect(() => {\n    const root = document.querySelector(rootSelector);\n    ids.forEach((id) => {\n      const elem = document.createElement('div');\n      elem.setAttribute('id', id);\n      root.appendChild(elem);\n    });\n    return () => {\n      ids.forEach((id) => {\n        const target = document.getElementById(id);\n        if (target) {\n          root.removeChild(target);\n        }\n      });\n    };\n  }, []);\n}\n\nexport default useAppendDomNode;\n","import './index.scss';\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { SendbirdSdkContext } from './SendbirdSdkContext';\nimport { handleConnection } from './dux/sdk/thunks';\n\nimport useTheme from './hooks/useTheme';\n\nimport sdkReducers from './dux/sdk/reducers';\nimport userReducers from './dux/user/reducers';\nimport sdkInitialState from './dux/sdk/initialState';\nimport userInitialState from './dux/user/initialState';\n\nimport useOnlineStatus from './hooks/useOnlineStatus';\n\nimport { LoggerFactory } from './Logger';\nimport pubSubFactory from './pubSub/index';\nimport useAppendDomNode from '../hooks/useAppendDomNode';\n\nimport { LocalizationProvider } from './LocalizationContext';\nimport getStringSet from '../ui/Label/stringSet';\n\nexport default function Sendbird(props) {\n  const {\n    userId,\n    dateLocale,\n    appId,\n    accessToken,\n    configureSession,\n    children,\n    disableUserProfile,\n    renderUserProfile,\n    allowProfileEdit,\n    theme,\n    nickname,\n    profileUrl,\n    userListQuery,\n    config = {},\n    colorSet,\n    stringSet,\n    imageCompression,\n    isReactionEnabled,\n    isMentionEnabled,\n    isTypingIndicatorEnabledOnChannelList,\n    isMessageReceiptStatusEnabledOnChannelList,\n  } = props;\n\n  const {\n    logLevel = '',\n    userMention = {},\n  } = config;\n  const [logger, setLogger] = useState(LoggerFactory(logLevel));\n  const [pubSub, setPubSub] = useState();\n  const [sdkStore, sdkDispatcher] = useReducer(sdkReducers, sdkInitialState);\n  const [userStore, userDispatcher] = useReducer(userReducers, userInitialState);\n\n  useTheme(colorSet);\n\n  useEffect(() => {\n    setPubSub(pubSubFactory());\n  }, []);\n\n  useEffect(() => {\n    logger.info('App Init');\n    // dispatch action\n    handleConnection({\n      userId,\n      appId,\n      accessToken,\n      sdkStore,\n      nickname,\n      profileUrl,\n      configureSession,\n      sdk: sdkStore.sdk,\n      logger,\n    }, {\n      sdkDispatcher,\n      userDispatcher,\n    });\n  }, [userId, appId, accessToken]);\n\n  // to create a pubsub to communicate between parent and child\n  useEffect(() => {\n    setLogger(LoggerFactory(logLevel));\n  }, [logLevel]);\n\n  useAppendDomNode([\n    'sendbird-modal-root',\n    'sendbird-dropdown-portal',\n    'sendbird-emoji-list-portal',\n  ], 'body');\n\n  // should move to reducer\n  const [currenttheme, setCurrenttheme] = useState(theme);\n  useEffect(() => {\n    setCurrenttheme(theme);\n  }, [theme]);\n  // add-remove theme from body\n  useEffect(() => {\n    logger.info('Setup theme', `Theme: ${currenttheme}`);\n    try {\n      const body = document.querySelector('body');\n      body.classList.remove('sendbird-theme--light');\n      body.classList.remove('sendbird-theme--dark');\n      body.classList.add(`sendbird-theme--${currenttheme || 'light'}`);\n      logger.info('Finish setup theme');\n      // eslint-disable-next-line no-empty\n    } catch (e) {\n      logger.warning('Setup theme failed', `${e}`);\n    }\n    return () => {\n      try {\n        const body = document.querySelector('body');\n        body.classList.remove('sendbird-theme--light');\n        body.classList.remove('sendbird-theme--dark');\n        // eslint-disable-next-line no-empty\n      } catch { }\n    };\n  }, [currenttheme]);\n\n  const isOnline = useOnlineStatus(sdkStore.sdk, logger);\n\n  const localeStringSet = React.useMemo(() => {\n    if (!stringSet) {\n      return getStringSet('en');\n    }\n    return {\n      ...getStringSet('en'),\n      ...stringSet,\n    };\n  }, [stringSet]);\n\n  return (\n    <SendbirdSdkContext.Provider\n      value={{\n        stores: {\n          sdkStore,\n          userStore,\n        },\n        dispatchers: {\n          sdkDispatcher,\n          userDispatcher,\n          reconnect: () => {\n            handleConnection({\n              userId,\n              appId,\n              accessToken,\n              sdkStore,\n              nickname,\n              profileUrl,\n              logger,\n              sdk: sdkStore.sdk,\n            }, {\n              sdkDispatcher,\n              userDispatcher,\n            });\n          },\n        },\n        config: {\n          disableUserProfile,\n          renderUserProfile,\n          allowProfileEdit,\n          isOnline,\n          userId,\n          appId,\n          accessToken,\n          theme: currenttheme,\n          setCurrenttheme,\n          userListQuery,\n          logger,\n          pubSub,\n          imageCompression,\n          isReactionEnabled,\n          isMentionEnabled: isMentionEnabled || false,\n          userMention: {\n            maxMentionCount: userMention?.maxMentionCount || 10,\n            maxSuggestionCount: userMention?.maxSuggestionCount || 15,\n          },\n          isTypingIndicatorEnabledOnChannelList,\n          isMessageReceiptStatusEnabledOnChannelList,\n        },\n      }}\n    >\n      <LocalizationProvider stringSet={localeStringSet} dateLocale={dateLocale}>\n        {children}\n      </LocalizationProvider>\n    </SendbirdSdkContext.Provider>\n  );\n}\n\nSendbird.propTypes = {\n  userId: PropTypes.string.isRequired,\n  appId: PropTypes.string.isRequired,\n  accessToken: PropTypes.string,\n  configureSession: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  theme: PropTypes.string,\n  nickname: PropTypes.string,\n  dateLocale: PropTypes.shape({}),\n  profileUrl: PropTypes.string,\n  disableUserProfile: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  allowProfileEdit: PropTypes.bool,\n  userListQuery: PropTypes.func,\n  config: PropTypes.shape({\n    // None Error Warning Info 'All/Debug'\n    logLevel: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n    pubSub: PropTypes.shape({\n      subscribe: PropTypes.func,\n      publish: PropTypes.func,\n    }),\n    userMention: PropTypes.shape({\n      maxMentionCount: PropTypes.number,\n      maxSuggestionCount: PropTypes.number,\n    }),\n  }),\n  stringSet: PropTypes.objectOf(PropTypes.string),\n  colorSet: PropTypes.objectOf(PropTypes.string),\n  isReactionEnabled: PropTypes.bool,\n  isMentionEnabled: PropTypes.bool,\n  imageCompression: PropTypes.shape({\n    compressionRate: PropTypes.number,\n    resizingWidth: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    resizingHeight: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n  }),\n  isTypingIndicatorEnabledOnChannelList: PropTypes.bool,\n  isMessageReceiptStatusEnabledOnChannelList: PropTypes.bool,\n};\n\nSendbird.defaultProps = {\n  accessToken: '',\n  configureSession: null,\n  theme: 'light',\n  nickname: '',\n  dateLocale: null,\n  profileUrl: '',\n  disableUserProfile: false,\n  renderUserProfile: null,\n  allowProfileEdit: false,\n  userListQuery: null,\n  config: {},\n  stringSet: null,\n  colorSet: null,\n  imageCompression: {},\n  isReactionEnabled: true,\n  isMentionEnabled: false,\n  isTypingIndicatorEnabledOnChannelList: false,\n  isMessageReceiptStatusEnabledOnChannelList: false,\n};\n"],"names":["INIT_SDK","SET_SDK_LOADING","RESET_SDK","SDK_ERROR","APP_VERSION_STRING","disconnectSdk","sdkDispatcher","userDispatcher","sdk","onDisconnect","type","payload","disconnect","then","RESET_USER","finally","handleConnection","dispatchers","userId","appId","nickname","profileUrl","accessToken","configureSession","logger","info","sessionHandler","newSdk","SendbirdChat","init","modules","GroupChannelModule","OpenChannelModule","addExtension","connectCbSucess","user","INIT_USER","isTextuallyNull","updateCurrentUserInfo","namedUser","UPDATE_USER_INFO","connectCbError","e","error","connect","res","catch","err","setSessionHandler","warning","isEmpty","obj","undefined","prop","hasOwnProperty","JSON","stringify","useTheme","overrides","useLayoutEffect","cssVars","variables","initialized","loading","reducer","state","action","sdkActions","initialState","actions","useConnectionStatus","isOnline","setIsOnline","useState","useEffect","uniqueHandlerId","uuidv4","handler","ConnectionHandler","onReconnectStarted","onReconnectSucceeded","onReconnectFailed","reconnect","addConnectionHandler","removeConnectionHandler","tryReconnect","connectionState","window","addEventListener","removeEventListener","body","document","querySelector","classList","add","remove","LOG_LEVELS","DEBUG","WARNING","ERROR","INFO","ALL","colorLog","level","printLog","title","description","console","log","Date","toISOString","getDefaultLogger","LoggerFactory","lvl","customInterface","logInterface","lvlArray","Array","isArray","applyLog","lgLvl","reduce","accumulator","currentLvl","topics","hOP","__getTopics","subscribe","topic","listener","call","index","push","publish","forEach","item","useAppendDomNode","ids","rootSelector","root","id","elem","createElement","setAttribute","appendChild","target","getElementById","removeChild","Sendbird","props","dateLocale","children","disableUserProfile","renderUserProfile","allowProfileEdit","theme","userListQuery","config","colorSet","stringSet","imageCompression","isReactionEnabled","isMentionEnabled","isTypingIndicatorEnabledOnChannelList","isMessageReceiptStatusEnabledOnChannelList","logLevel","userMention","setLogger","pubSub","setPubSub","sdkStore","useReducer","sdkReducers","sdkInitialState","userStore","userReducers","userInitialState","pubSubFactory","currenttheme","setCurrenttheme","useOnlineStatus","localeStringSet","React","useMemo","getStringSet","SendbirdSdkContext","stores","maxMentionCount","maxSuggestionCount","LocalizationProvider","propTypes","PropTypes","string","isRequired","func","oneOfType","element","arrayOf","any","shape","bool","number","objectOf","compressionRate","resizingWidth","resizingHeight","defaultProps"],"mappings":"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"}