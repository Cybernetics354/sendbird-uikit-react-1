{"version":3,"file":"index-20c28d36.js","sources":["../../src/smart-components/EditUserProfile/context/EditUserProfIleProvider.tsx","../../src/smart-components/EditUserProfile/components/EditUserProfileUI/index.tsx"],"sourcesContent":["import type { User } from '@sendbird/chat';\nimport React, { useMemo } from 'react';\n\nconst EditUserProfileProviderContext = React.createContext(undefined);\n\nexport interface EditUserProfileProps {\n  children?: React.ReactNode;\n  onCancel?(): void;\n  onThemeChange?(theme: string): void;\n  onEditProfile?(updatedUser: User): void;\n}\n\nexport interface EditUserProfileProviderInterface {\n  onCancel?(): void;\n  onThemeChange?(theme: string): void;\n  onEditProfile?(updatedUser: User): void;\n}\n\nconst EditUserProfileProvider: React.FC<EditUserProfileProps> = (props: EditUserProfileProps) => {\n  const {\n    children,\n    onEditProfile,\n    onCancel,\n    onThemeChange,\n  } = props;\n\n  const value = useMemo(() => {\n    return {\n      onEditProfile,\n      onCancel,\n      onThemeChange,\n    };\n  }, []);\n\n  return (\n    <EditUserProfileProviderContext.Provider value={value}>\n      {children}\n    </EditUserProfileProviderContext.Provider>\n  );\n}\n\nconst useEditUserProfileContext = (): EditUserProfileProviderInterface => (\n  React.useContext(EditUserProfileProviderContext)\n);\n\nexport {\n  EditUserProfileProvider,\n  useEditUserProfileContext,\n};\n","import './edit-user-profile.scss';\n\nimport React, {\n  ReactElement,\n  useRef,\n  useState,\n  useContext,\n} from 'react';\nimport { useEditUserProfileContext } from '../../context/EditUserProfIleProvider';\n\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\nimport Input, { InputLabel } from '../../../../ui/Input';\nimport Avatar from '../../../../ui/Avatar';\nimport Icon, { IconTypes } from '../../../../ui/Icon';\nimport { Type as ButtonType } from '../../../../ui/Button/type';\nimport Label, { LabelColors, LabelTypography } from '../../../../ui/Label';\nimport TextButton from '../../../../ui/TextButton';\nimport { noop } from '../../../../utils/utils';\nimport * as userActions from '../../../../lib/dux/user/actionTypes';\n\nexport default function EditUserProfile(): ReactElement {\n  const editProfileProps = useEditUserProfileContext();\n  const store = useSendbirdStateContext();\n  const hiddenInputRef = useRef(null);\n  const inputRef = useRef(null);\n  const formRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const [currentImg, setCurrentImg] = useState(null);\n  const [newFile, setNewFile] = useState(null);\n\n  const {\n    onEditProfile,\n    onCancel,\n    onThemeChange,\n  } = editProfileProps;\n\n  const theme = store?.config?.theme || 'light';\n  const changeTheme = store?.config?.setCurrenttheme || noop;\n  const user = store?.stores?.userStore?.user;\n  const sdk = store?.stores?.sdkStore?.sdk;\n  const userDispatcher = store?.dispatchers?.userDispatcher;\n\n  return (\n    <Modal\n      titleText={stringSet.EDIT_PROFILE__TITLE}\n      submitText={stringSet.BUTTON__SAVE}\n      type={ButtonType.PRIMARY}\n      onCancel={onCancel}\n      onSubmit={() => {\n        if (user?.nickname !== '' && !inputRef.current.value) {\n          if (formRef.current.reportValidity) { // might not work in explorer\n            formRef.current.reportValidity();\n          }\n          return;\n        }\n        sdk?.updateCurrentUserInfo({\n          nickname: inputRef?.current?.value,\n          profileImage: newFile,\n        }).then((updatedUser) => {\n          userDispatcher({ type: userActions.UPDATE_USER_INFO, payload: updatedUser });\n          if (onEditProfile && typeof onEditProfile === 'function') {\n            onEditProfile(updatedUser);\n          }\n        });\n      }}\n    >\n      <form\n        className=\"sendbird-edit-user-profile\"\n        ref={formRef}\n        onSubmit={(e) => { e.preventDefault(); }}\n      >\n        <section className=\"sendbird-edit-user-profile__img\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__IMAGE_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__img__avatar\">\n            <Avatar\n              width=\"80px\"\n              height=\"80px\"\n              src={currentImg || user?.profileUrl}\n            />\n          </div>\n          <input\n            ref={hiddenInputRef}\n            type=\"file\"\n            accept=\"image/gif, image/jpeg, image/png\"\n            style={{ display: 'none' }}\n            onChange={(e) => {\n              setCurrentImg(URL.createObjectURL(e.target.files[0]));\n              setNewFile(e.target.files[0]);\n              hiddenInputRef.current.value = '';\n            }}\n          />\n          <TextButton\n            className=\"sendbird-edit-user-profile__img__avatar-button\"\n            notUnderline\n            onClick={() => hiddenInputRef.current.click()}\n          >\n            <Label type={LabelTypography.BUTTON_1} color={LabelColors.PRIMARY}>\n              {stringSet.EDIT_PROFILE__IMAGE_UPLOAD}\n            </Label>\n          </TextButton>\n        </section>\n        <section className=\"sendbird-edit-user-profile__name\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__NICKNAME_LABEL}\n          </InputLabel>\n          <Input\n            required={user?.nickname !== ''}\n            name=\"sendbird-edit-user-profile__name__input\"\n            ref={inputRef}\n            value={user?.nickname}\n            placeHolder={stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__userid\">\n          <InputLabel>\n            {/*  userID */}\n            {stringSet.EDIT_PROFILE__USERID_LABEL}\n          </InputLabel>\n          <Input\n            disabled\n            name=\"sendbird-edit-user-profile__userid__input\"\n            value={user?.userId}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__theme\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__THEME_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__theme__theme-icon\">\n            {\n              theme === 'dark'\n                ? (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('light');\n                      onThemeChange?.('light');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('light');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_ON}\n                    width={44}\n                    height={24}\n                  />\n                )\n                : (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('dark');\n                      onThemeChange?.('dark');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('dark');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_OFF}\n                    width={44}\n                    height={24}\n                  />\n                )\n            }\n          </div>\n        </section>\n      </form>\n    </Modal>\n  );\n}\n\n"],"names":["EditUserProfileProviderContext","React","createContext","undefined","EditUserProfileProvider","props","children","onEditProfile","onCancel","onThemeChange","value","useMemo","useEditUserProfileContext","useContext","EditUserProfile","editProfileProps","store","useSendbirdStateContext","hiddenInputRef","useRef","inputRef","formRef","stringSet","LocalizationContext","_h","useState","currentImg","setCurrentImg","_j","newFile","setNewFile","theme","config","changeTheme","setCurrenttheme","noop","user","stores","userStore","sdk","sdkStore","userDispatcher","dispatchers","Modal","EDIT_PROFILE__TITLE","BUTTON__SAVE","ButtonType","PRIMARY","nickname","current","reportValidity","updateCurrentUserInfo","profileImage","then","updatedUser","type","userActions","payload","e","preventDefault","InputLabel","EDIT_PROFILE__IMAGE_LABEL","Avatar","profileUrl","display","URL","createObjectURL","target","files","TextButton","click","Label","LabelTypography","BUTTON_1","LabelColors","EDIT_PROFILE__IMAGE_UPLOAD","EDIT_PROFILE__NICKNAME_LABEL","Input","EDIT_PROFILE__NICKNAME_PLACEHOLDER","EDIT_PROFILE__USERID_LABEL","userId","EDIT_PROFILE__THEME_LABEL","Icon","IconTypes","TOGGLE_ON","TOGGLE_OFF"],"mappings":"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"}