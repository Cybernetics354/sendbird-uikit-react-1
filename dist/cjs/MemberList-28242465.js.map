{"version":3,"file":"MemberList-28242465.js","sources":["../../src/smart-components/ChannelSettings/components/ModerationPanel/MembersModal.tsx","../../src/smart-components/ChannelSettings/components/ModerationPanel/InviteUsersModal.tsx","../../src/smart-components/ChannelSettings/components/ModerationPanel/MemberList.tsx"],"sourcesContent":["import React, {\n  ReactElement,\n  useEffect,\n  useState,\n} from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport UserListItem from '../../../../ui/UserListItem';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\nimport { noop } from '../../../../utils/utils';\n\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n}\n\nexport default function MembersModal({ onCancel }: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [memberQuery, setMemberQuery] = useState(null);\n\n  const { channel } = useChannelSettingsContext();\n  const state = useSendbirdStateContext();\n  const currentUser = state?.config?.userId;\n\n  useEffect(() => {\n    const memberListQuery = channel?.createMemberListQuery({\n      limit: 20,\n    });\n    memberListQuery.next().then((members) => {\n      setMembers(members);\n    });\n    setMemberQuery(memberListQuery);\n  }, [])\n  return (\n    <div>\n      <Modal\n        hideFooter\n        onCancel={() => onCancel()}\n        onSubmit={noop}\n        titleText=\"All Members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = memberQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n\n            if (hasNext && fetchMore) {\n              memberQuery.next().then((o) => {\n                setMembers([\n                  ...members,\n                  ...o,\n                ])\n              });\n            }\n          }}\n        >\n          { members.map((member) => (\n            <UserListItem\n              user={member}\n              key={member.userId}\n              currentUser={currentUser}\n              action={({ parentRef, actionRef }) => (\n                <>\n                  {channel?.myRole === 'operator' && (\n                    <ContextMenu\n                      menuTrigger={(toggleDropdown) => (\n                        <IconButton\n                          className=\"sendbird-user-message__more__menu\"\n                          width=\"32px\"\n                          height=\"32px\"\n                          onClick={toggleDropdown}\n                        >\n                          <Icon\n                            width=\"24px\"\n                            height=\"24px\"\n                            type={IconTypes.MORE}\n                            fillColor={IconColors.CONTENT_INVERSE}\n                          />\n                        </IconButton>\n                      )}\n                      menuItems={(closeDropdown) => (\n                        <MenuItems\n                          parentContainRef={parentRef}\n                          parentRef={actionRef} // for catching location(x, y) of MenuItems\n                          closeDropdown={closeDropdown}\n                          openLeft\n                        >\n                          <MenuItem\n                            onClick={() => {\n                              if ((member.role !== 'operator')) {\n                                channel?.addOperators([member.userId]).then(() => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: 'operator',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              } else {\n                                channel?.removeOperators([member.userId]).then(() => {\n                                  setMembers(members.map(m => {\n                                    if(m.userId === member.userId) {\n                                      return {\n                                        ...member,\n                                        role: '',\n                                      };\n                                    }\n                                    return m;\n                                  }));\n                                  closeDropdown();\n                                });\n                              }\n                            }}\n                          >\n                            { member.role !== 'operator' ? 'Register as operator' : 'Unregister operator'}\n                          </MenuItem>\n                          {\n                            // No muted members in broadcast channel\n                            !channel?.isBroadcast && (\n                              <MenuItem\n                                onClick={() => {\n                                  if (member.isMuted) {\n                                    channel?.unmuteUser(member).then(() => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: false,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    })\n                                  } else {\n                                    channel?.muteUser(member).then(() => {\n                                      setMembers(members.map(m => {\n                                        if(m.userId === member.userId) {\n                                          return {\n                                            ...member,\n                                            isMuted: true,\n                                          };\n                                        }\n                                        return m;\n                                      }));\n                                      closeDropdown();\n                                    });\n                                  }\n                                }}\n                              >\n                                { member.isMuted ? 'Unmute' : 'Mute' }\n                              </MenuItem>\n                            )\n                          }\n                          <MenuItem\n                            onClick={() => {\n                              channel?.banUser(member, -1, '').then(() => {\n                                setMembers(members.filter(({ userId }) => {\n                                  return userId !== member.userId;\n                                }));\n                              });\n                            }}\n                          >\n                            Ban\n                          </MenuItem>\n                        </MenuItems>\n                      )}\n                    />\n                  )}\n                </>\n              )}\n            />\n          ))}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { ReactElement, useEffect, useState } from 'react'\n\nimport Modal from '../../../../ui/Modal';\nimport { Type as ButtonType } from '../../../../ui/Button/type';\nimport UserListItem from '../../../../ui/UserListItem';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\ninterface Props {\n  onCancel(): void;\n  onSubmit(members: Array<string>): void;\n}\n\nexport default function InviteUsers({\n  onCancel,\n  onSubmit,\n}: Props): ReactElement {\n  const [members, setMembers] = useState([]);\n  const [selectedMembers, setSelectedMembers] = useState({});\n  const [userQuery, setUserQuery] = useState(null);\n\n  const state = useSendbirdStateContext();\n  const sdk = state?.stores?.sdkStore?.sdk;\n\n  const { channel } = useChannelSettingsContext();\n\n  useEffect(() => {\n    const userListQuery = sdk?.createApplicationUserListQuery();\n    userListQuery.next().then((members) => {\n      setMembers(members);\n    });\n    setUserQuery(userListQuery);\n  }, [sdk])\n  return (\n    <div>\n      <Modal\n        disabled={Object.keys(selectedMembers).length === 0}\n        submitText=\"Invite\"\n        type={ButtonType.PRIMARY}\n        onCancel={() => onCancel()}\n        onSubmit={() => {\n          const members = Object.keys(selectedMembers).filter((m) => selectedMembers[m]);\n          channel?.inviteWithUserIds(members).then(() => {\n            onSubmit(members);\n          });\n        }}\n        titleText=\"Select members\"\n      >\n        <div\n          className=\"sendbird-more-members__popup-scroll\"\n          onScroll={(e) => {\n            const { hasNext } = userQuery;\n            const target = e.target as HTMLTextAreaElement;\n            const fetchMore = (\n              target.clientHeight + target.scrollTop === target.scrollHeight\n            );\n            if (hasNext && fetchMore) {\n              userQuery.next().then((users) => {\n                setMembers([\n                  ...members,\n                  ...users,\n                ])\n              });\n            }\n          }}\n        >\n          <div className=\"sendbird-more-members__popup-scroll__inner\">\n            { members.map((member) => (\n              <UserListItem\n                checkBox\n                checked={selectedMembers[member.userId]}\n                onChange={\n                  (event) => {\n                    const modifiedSelectedMembers = {\n                      ...selectedMembers,\n                      [event.target.id]: event.target.checked,\n                    };\n                    if (!event.target.checked) {\n                      delete modifiedSelectedMembers[event.target.id];\n                    }\n                    setSelectedMembers(modifiedSelectedMembers);\n                  }\n                }\n                user={member}\n                key={member.userId}\n              />\n            ))}\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, {\n  ReactElement,\n  useEffect,\n  useState,\n  useCallback,\n} from 'react';\n\nimport Button, { ButtonTypes, ButtonSizes } from '../../../../ui/Button';\nimport IconButton from '../../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../../ui/Icon';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../../ui/ContextMenu';\n\nimport UserListItem from '../UserListItem';\nimport MembersModal from './MembersModal';\nimport InviteUsers from './InviteUsersModal';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport uuidv4 from '../../../../utils/uuid';\n\nexport const MemberList = (): ReactElement => {\n  const [members, setMembers] = useState([]);\n  const [hasNext, setHasNext] = useState(false);\n  const [showAllMembers, setShowAllMembers] = useState(false);\n  const [showInviteUsers, setShowInviteUsers] = useState(false);\n\n  const state = useSendbirdStateContext();\n  const {\n    channel,\n    setChannelUpdateId,\n  } = useChannelSettingsContext();\n\n  const sdk = state?.stores?.sdkStore?.sdk;\n  const userId = state?.config?.userId;\n\n  useEffect(() => {\n    if (!channel) {\n      setMembers([]);\n      return;\n    }\n\n    const memberUserListQuery = channel?.createMemberListQuery({\n      limit: 10,\n    });\n    memberUserListQuery.next().then((members) => {\n      setMembers(members);\n      setHasNext(memberUserListQuery.hasNext);\n    });\n  }, [channel]);\n\n  const refershList = useCallback(\n    () => {\n      if (!channel) {\n        setMembers([]);\n        return;\n      }\n      const memberUserListQuery = channel?.createMemberListQuery({\n        limit: 10,\n      });\n      memberUserListQuery.next().then((members) => {\n        setMembers(members);\n        setHasNext(memberUserListQuery.hasNext);\n        setChannelUpdateId(uuidv4());\n      });\n    },\n    [channel],\n  );\n\n  return (\n    <>\n      {\n        members.map((member) => (\n          <UserListItem\n            key={member.userId}\n            user={member}\n            currentUser={sdk.currentUser.userId}\n            action={\n              (userId !== member.userId)\n                ? ({ actionRef, parentRef }) => (\n                  <ContextMenu\n                    menuTrigger={(toggleDropdown) => (\n                      <IconButton\n                        className=\"sendbird-user-message__more__menu\"\n                        width=\"32px\"\n                        height=\"32px\"\n                        onClick={toggleDropdown}\n                      >\n                        <Icon\n                          width=\"24px\"\n                          height=\"24px\"\n                          type={IconTypes.MORE}\n                          fillColor={IconColors.CONTENT_INVERSE}\n                        />\n                      </IconButton>\n                    )}\n                    menuItems={(closeDropdown) => (\n                      <MenuItems\n                        parentContainRef={parentRef}\n                        parentRef={actionRef} // for catching location(x, y) of MenuItems\n                        closeDropdown={closeDropdown}\n                        openLeft\n                      >\n                        <MenuItem\n                          onClick={() => {\n                            if ((member.role !== 'operator')) {\n                              channel?.addOperators([member.userId]).then(() => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            } else {\n                              channel?.removeOperators([member.userId]).then(() => {\n                                refershList();\n                                closeDropdown();\n                              });\n                            }\n                          }}\n                        >\n                          {member.role !== 'operator' ? 'Register as operator' : 'Unregister operator'}\n                        </MenuItem>\n                        {\n                          // No muted members in broadcast channel\n                          !channel?.isBroadcast && (\n                            <MenuItem\n                              onClick={() => {\n                                if (member.isMuted) {\n                                  channel?.unmuteUser(member).then(() => {\n                                    refershList();\n                                    closeDropdown();\n                                  })\n                                } else {\n                                  channel?.muteUser(member).then(() => {\n                                    refershList();\n                                    closeDropdown();\n                                  });\n                                }\n                              }}\n                            >\n                              { member.isMuted ? 'Unmute' : 'Mute'}\n                            </MenuItem>\n                          )\n                        }\n                        <MenuItem\n                          onClick={() => {\n                            channel?.banUser(member, -1, '').then(() => {\n                              refershList();\n                              closeDropdown();\n                            });\n                          }}\n                        >\n                          Ban\n                    </MenuItem>\n                      </MenuItems>\n                    )}\n                  />\n                )\n                : null\n            }\n          />\n        ))\n      }\n      <div\n        className=\"sendbird-channel-settings-accordion__footer\"\n      >\n        {\n          hasNext && (\n            <Button\n              type={ButtonTypes.SECONDARY}\n              size={ButtonSizes.SMALL}\n              onClick={() => setShowAllMembers(true)}\n            >\n              All members\n            </Button>\n          )\n        }\n        <Button\n          type={ButtonTypes.SECONDARY}\n          size={ButtonSizes.SMALL}\n          onClick={() => setShowInviteUsers(true)}\n        >\n          Invite members\n        </Button>\n      </div>\n      {\n        showAllMembers && (\n          <MembersModal\n            onCancel={() => {\n              setShowAllMembers(false);\n              refershList();\n            }}\n          />\n        )\n      }\n      {\n        showInviteUsers && (\n          <InviteUsers\n            onSubmit={() => {\n              setShowInviteUsers(false);\n              refershList();\n            }}\n            onCancel={() => setShowInviteUsers(false)}\n          />\n        )\n      }\n    </>\n  );\n}\n\nexport default MemberList;\n"],"names":["MembersModal","_a","onCancel","_c","useState","members","setMembers","_d","memberQuery","setMemberQuery","channel","useChannelSettingsContext","state","useSendbirdStateContext","currentUser","config","userId","useEffect","memberListQuery","createMemberListQuery","limit","next","then","React","Modal","noop","e","hasNext","target","fetchMore","clientHeight","scrollTop","scrollHeight","o","map","member","UserListItem","parentRef","actionRef","myRole","ContextMenu","toggleDropdown","IconButton","Icon","IconTypes","MORE","IconColors","CONTENT_INVERSE","closeDropdown","MenuItems","MenuItem","role","addOperators","m","removeOperators","isBroadcast","isMuted","unmuteUser","muteUser","banUser","filter","InviteUsers","onSubmit","_e","selectedMembers","setSelectedMembers","_f","userQuery","setUserQuery","sdk","stores","sdkStore","userListQuery","createApplicationUserListQuery","Object","keys","length","ButtonType","PRIMARY","inviteWithUserIds","users","event","modifiedSelectedMembers","id","checked","MemberList","setHasNext","showAllMembers","setShowAllMembers","_g","showInviteUsers","setShowInviteUsers","_h","setChannelUpdateId","memberUserListQuery","refershList","useCallback","uuidv4","Button","ButtonTypes","SECONDARY","ButtonSizes","SMALL"],"mappings":"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"}