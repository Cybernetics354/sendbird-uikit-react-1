{"version":3,"file":"UserListItem.js","sources":["../../../src/ui/UserListItem/index.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { UserProfileContext } from '../../lib/UserProfileContext';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Avatar from '../Avatar/index';\nimport MutedAvatarOverlay from '../Avatar/MutedAvatarOverlay';\nimport Checkbox from '../Checkbox';\nimport UserProfile from '../UserProfile';\nimport ContextMenu, { MenuItems } from '../ContextMenu';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nimport './index.scss';\n\nexport default function UserListItem({\n  className,\n  user,\n  checkBox,\n  disableMessaging,\n  currentUser,\n  checked,\n  onChange,\n  action,\n}) {\n  const uniqueKey = user.userId;\n  const actionRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const avatarRef = React.useRef(null);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext(UserProfileContext);\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-user-list-item',\n      ].join(' ')}\n      ref={parentRef}\n    >\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay height={40} width={40} />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            className=\"sendbird-user-list-item__avatar\"\n            ref={avatarRef}\n            src={user.profileUrl}\n            width=\"40px\"\n            height=\"40px\"\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: 0, paddingBottom: 0 }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    disableMessaging={disableMessaging}\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className=\"sendbird-user-list-item__title\"\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            ' (You)'\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className=\"sendbird-user-list-item__subtitle\"\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        checkBox && (\n          // eslint-disable-next-line jsx-a11y/label-has-associated-control\n          <label\n            className=\"sendbird-user-list-item__checkbox\"\n            htmlFor={uniqueKey}\n          >\n            <Checkbox\n              id={uniqueKey}\n              checked={checked}\n              onChange={(event) => onChange(event)}\n            />\n          </label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className=\"sendbird-user-list-item__operator\"\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div\n            className=\"sendbird-user-list-item__action\"\n            ref={actionRef}\n          >\n            { action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nUserListItem.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  user: PropTypes.shape({\n    userId: PropTypes.string,\n    role: PropTypes.string,\n    isMuted: PropTypes.bool,\n    nickname: PropTypes.string,\n    profileUrl: PropTypes.string,\n  }).isRequired,\n  disableMessaging: PropTypes.bool,\n  currentUser: PropTypes.string,\n  action: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.func,\n  ]),\n  checkBox: PropTypes.bool,\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nUserListItem.defaultProps = {\n  className: '',\n  currentUser: '',\n  checkBox: false,\n  disableMessaging: false,\n  checked: false,\n  action: null,\n  onChange: () => { },\n};\n"],"names":["UserListItem","className","user","checkBox","disableMessaging","currentUser","checked","onChange","action","uniqueKey","userId","actionRef","React","useRef","parentRef","avatarRef","disableUserProfile","renderUserProfile","useContext","UserProfileContext","stringSet","LocalizationContext","Array","isArray","join","isMuted","MutedAvatarOverlay","ContextMenu","toggleDropdown","Avatar","profileUrl","closeDropdown","MenuItems","paddingTop","paddingBottom","currentUserId","close","UserProfile","Label","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","CAPTION_3","ONBACKGROUND_2","Checkbox","event","role","SUBTITLE_2","propTypes","PropTypes","oneOfType","string","arrayOf","shape","bool","isRequired","element","func","defaultProps"],"mappings":"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"}