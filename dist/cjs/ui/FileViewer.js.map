{"version":3,"file":"FileViewer.js","sources":["../../../src/ui/FileViewer/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\n\nimport { isImage, isVideo, isSupportedFileView } from '../../utils';\n\nexport const FileViewerComponent = ({\n  // sender\n  profileUrl,\n  nickname,\n  // file\n  name,\n  type,\n  url,\n  // others\n  isByMe,\n  onClose,\n  onDelete,\n  disableDelete,\n}) => (\n  <div className=\"sendbird-fileviewer\">\n    <div className=\"sendbird-fileviewer__header\">\n      <div className=\"sendbird-fileviewer__header__left\">\n        <div className=\"sendbird-fileviewer__header__left__avatar\">\n          <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n        </div>\n        <Label\n          className=\"sendbird-fileviewer__header__left__filename\"\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {name}\n        </Label>\n        <Label\n          className=\"sendbird-fileviewer__header__left__sender-name\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {nickname}\n        </Label>\n      </div>\n      <div className=\"sendbird-fileviewer__header__right\">\n        {\n          isSupportedFileView(type) && (\n            <div className=\"sendbird-fileviewer__header__right__actions\">\n              <a\n                className=\"sendbird-fileviewer__header__right__actions__download\"\n                rel=\"noopener noreferrer\"\n                href={url}\n                target=\"_blank\"\n              >\n                <Icon\n                  type={IconTypes.DOWNLOAD}\n                  fillColor={IconColors.ON_BACKGROUND_1}\n                  height=\"24px\"\n                  width=\"24px\"\n                />\n              </a>\n              {\n                onDelete && isByMe && (\n                  <div className=\"sendbird-fileviewer__header__right__actions__delete\">\n                    <Icon\n                      className={disableDelete ? 'disabled' : ''}\n                      type={IconTypes.DELETE}\n                      fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n                      height=\"24px\"\n                      width=\"24px\"\n                      onClick={() => { if (!disableDelete) { onDelete(); } }}\n                    />\n                  </div>\n                )\n              }\n            </div>\n          )\n        }\n        <div className=\"sendbird-fileviewer__header__right__actions__close\">\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            height=\"24px\"\n            width=\"24px\"\n            onClick={onClose}\n          />\n        </div>\n      </div>\n    </div>\n    <div className=\"sendbird-fileviewer__content\">\n      {isVideo(type) && (\n        // eslint-disable-next-line jsx-a11y/media-has-caption\n        <video controls className=\"sendbird-fileviewer__content__video\">\n          <source src={url} type={type} />\n        </video>\n      )}\n      {\n        isImage(type) && (\n          <img\n            src={url}\n            alt={name}\n            className=\"sendbird-fileviewer__content__img\"\n          />\n        )\n      }\n      {\n        !isSupportedFileView(type) && (\n          <div className=\"sendbird-fileviewer__content__unsupported\">\n            <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n              Unsupoprted message\n            </Label>\n          </div>\n        )\n      }\n    </div>\n  </div>\n);\n\nFileViewerComponent.propTypes = {\n  profileUrl: PropTypes.string.isRequired,\n  nickname: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  isByMe: PropTypes.bool,\n  disableDelete: PropTypes.bool,\n};\n\nFileViewerComponent.defaultProps = {\n  isByMe: true,\n  disableDelete: false,\n};\n\nexport default function FileViewer(props) {\n  const {\n    message,\n    isByMe,\n    onClose,\n    onDelete,\n  } = props;\n  const {\n    sender,\n    type,\n    url,\n    name = '',\n    threadInfo = {},\n  } = message;\n  const disableDelete = threadInfo?.replyCount > 0;\n  const { profileUrl, nickname = '' } = sender;\n  return createPortal(\n    (\n      <FileViewerComponent\n        profileUrl={profileUrl}\n        nickname={nickname}\n        type={type}\n        url={url}\n        name={name}\n        onClose={onClose}\n        onDelete={onDelete}\n        isByMe={isByMe}\n        disableDelete={disableDelete}\n      />\n    ),\n    document.getElementById(MODAL_ROOT),\n  );\n}\n\nFileViewer.propTypes = {\n  message: PropTypes.shape({\n    sender: PropTypes.shape({\n      profileUrl: PropTypes.string,\n      nickname: PropTypes.string,\n    }),\n    type: PropTypes.string,\n    url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n  isByMe: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n};\n\nFileViewer.defaultProps = {\n  isByMe: true,\n};\n"],"names":["FileViewerComponent","profileUrl","nickname","name","type","url","isByMe","onClose","onDelete","disableDelete","React","Avatar","Label","LabelTypography","H_2","LabelColors","ONBACKGROUND_1","BODY_1","ONBACKGROUND_2","isSupportedFileView","Icon","IconTypes","DOWNLOAD","IconColors","ON_BACKGROUND_1","DELETE","GRAY","CLOSE","isVideo","isImage","H_1","propTypes","PropTypes","string","isRequired","func","bool","defaultProps","FileViewer","props","message","sender","threadInfo","replyCount","createPortal","document","getElementById","MODAL_ROOT","shape"],"mappings":"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"}