{"version":3,"file":"ChannelPreviewAction.js","sources":["../../../../src/smart-components/ChannelList/components/LeaveChannel/index.tsx","../../../../src/smart-components/ChannelList/components/ChannelPreviewAction.jsx"],"sourcesContent":["import React from 'react';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useChannelListContext } from '../../context/ChannelListProvider';\n\nexport type LeaveChannelProps = {\n  onSubmit: () => void;\n  onCancel: () => void;\n}\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const channel = useChannelListContext()?.currentChannel;\n  const state = useSendbirdStateContext();\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  if (channel) {\n    return (\n      <Modal\n        disabled={!isOnline}\n        onCancel={onCancel}\n        onSubmit={() => {\n          logger.info('ChannelSettings: Leaving channel', channel);\n          channel?.leave()\n            .then(() => {\n              logger.info('ChannelSettings: Leaving channel successful!', channel);\n              onSubmit();\n            });\n        }}\n        submitText=\"Leave\"\n        titleText=\"Leave this channel?\"\n      />\n    );\n  }\n};\n\nexport default LeaveChannel;\n","import React, {\n  useState,\n  useRef,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from './LeaveChannel';\n\nexport default function ChannelPreviewAction({ disabled, onLeaveChannel }) {\n  const parentRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => { e.stopPropagation(); }}\n      tabIndex={0}\n      onClick={(e) => { e.stopPropagation(); }}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <IconButton\n            ref={parentRef}\n            onClick={toggleDropdown}\n            height=\"32px\"\n            width=\"32px\"\n          >\n            <Icon\n              type={IconTypes.MORE}\n              fillColor={IconColors.PRIMARY}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            parentRef={parentRef}\n            parentContainRef={parentRef}\n            closeDropdown={closeDropdown}\n          >\n            <MenuItem\n              onClick={() => {\n                if (disabled) { return; }\n                setShowModal(true);\n                closeDropdown();\n              }}\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {\n        showModal && (\n          <LeaveChannelModal\n            onSubmit={() => {\n              setShowModal(false);\n              onLeaveChannel();\n            }}\n            onCancel={() => setShowModal(false)}\n          />\n        )\n      }\n    </div>\n  );\n}\n\nChannelPreviewAction.propTypes = {\n  disabled: PropTypes.bool,\n  onLeaveChannel: PropTypes.func.isRequired,\n};\n\nChannelPreviewAction.defaultProps = {\n  disabled: false,\n};\n"],"names":["LeaveChannel","props","_d","onSubmit","noop","_e","onCancel","channel","_a","useChannelListContext","currentChannel","state","useSendbirdStateContext","logger","_b","config","isOnline","_c","React","Modal","info","leave","then","ChannelPreviewAction","disabled","onLeaveChannel","parentRef","useRef","showModal","setShowModal","useState","stringSet","useContext","LocalizationContext","display","e","stopPropagation","ContextMenu","toggleDropdown","IconButton","Icon","IconTypes","MORE","IconColors","PRIMARY","closeDropdown","MenuItems","MenuItem","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal","propTypes","PropTypes","bool","func","isRequired","defaultProps"],"mappings":"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"}