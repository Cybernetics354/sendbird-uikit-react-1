{"version":3,"file":"openChannelUtils-006f75e9.js","sources":["../../src/utils/openChannelUtils.ts"],"sourcesContent":["import type { User } from '@sendbird/chat';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\n\nconst OpenChannelMessageStatusTypes = {\n  NONE: 'none',\n  PENDING: 'pending',\n  FAILED: 'failed',\n  CANCELED: 'canceled',\n  SUCCEEDED: 'succeeded'\n};\n\nexport const getSenderFromMessage = (message: UserMessage | FileMessage): User => {\n  // @ts-ignore\n  return message.sender || message._sender;\n};\n\nexport const checkIsSent = (status: string): boolean => (status === OpenChannelMessageStatusTypes.SUCCEEDED);\nexport const checkIsPending = (status: string): boolean => (status === OpenChannelMessageStatusTypes.PENDING);\nexport const checkIsFailed = (status: string): boolean => (status === OpenChannelMessageStatusTypes.FAILED);\n\nexport const checkIsByMe = (message: UserMessage | FileMessage, userId: string): boolean => (getSenderFromMessage(message).userId === userId);\n\ninterface isFineCopyParams {\n  message: UserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineCopy = ({ message }: isFineCopyParams): boolean => {\n  return (message?.messageType === 'user' && message?.message?.length > 0);\n};\n\ninterface isFineResendParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineResend = ({ message, status, userId }: isFineResendParams): boolean => {\n  return checkIsByMe(message, userId)\n    && checkIsFailed(status)\n    // @ts-ignore\n    && message?.isResendable();\n};\n\ninterface isFineEditParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineEdit = ({ message, status, userId }: isFineEditParams): boolean => {\n  return checkIsByMe(message, userId) && checkIsSent(status);\n};\n\ninterface isFineDeleteParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineDelete = ({ message, userId }: isFineDeleteParams): boolean => {\n  return checkIsByMe(message, userId);\n};\n\ninterface showMenuTriggerParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const showMenuTrigger = (props: showMenuTriggerParams): boolean => {\n  const { message, status, userId } = props;\n  // @ts-ignore\n  if (message.messageType === 'user') {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineEdit({ message, status, userId })\n      // @ts-ignore\n      || isFineCopy({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  } else {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  }\n};\n"],"names":["OpenChannelMessageStatusTypes","NONE","PENDING","FAILED","CANCELED","SUCCEEDED","getSenderFromMessage","message","sender","_sender","checkIsSent","status","checkIsPending","checkIsFailed","checkIsByMe","userId","isFineCopy","_a","messageType","length","isFineResend","isResendable","isFineEdit","isFineDelete","showMenuTrigger","props"],"mappings":";;AAGA,IAAMA,6BAA6B,GAAG;EACpCC,IAAI,EAAE,MAD8B;EAEpCC,OAAO,EAAE,SAF2B;EAGpCC,MAAM,EAAE,QAH4B;EAIpCC,QAAQ,EAAE,UAJ0B;EAKpCC,SAAS,EAAE;AALyB,CAAtC;IAQaC,oBAAoB,GAAG,UAACC,OAAD;;EAElC,OAAOA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACE,OAAjC;AACD;IAEYC,WAAW,GAAG,UAACC,MAAD;EAA6B,OAACA,MAAM,KAAKX,6BAA6B,CAACK,SAA1C;AAAoD;IAC/FO,cAAc,GAAG,UAACD,MAAD;EAA6B,OAACA,MAAM,KAAKX,6BAA6B,CAACE,OAA1C;AAAkD;IAChGW,aAAa,GAAG,UAACF,MAAD;EAA6B,OAACA,MAAM,KAAKX,6BAA6B,CAACG,MAA1C;AAAiD;IAE9FW,WAAW,GAAG,UAACP,OAAD,EAAqCQ,MAArC;EAAiE,OAACT,oBAAoB,CAACC,OAAD,CAApB,CAA8BQ,MAA9B,KAAyCA,MAA1C;AAAiD;IAOhIC,UAAU,GAAG,UAACC,EAAD;;;MAAGV,OAAO;EAClC,OAAQ,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEW,WAAT,MAAyB,MAAzB,IAAmC,CAAA,MAAAX,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEA,OAAT,UAAA,iBAAA,SAAA,MAAkBY,MAAlB,IAA2B,CAAtE;AACD;IAOYC,YAAY,GAAG,UAACH,EAAD;MAAGV,OAAO;MAAEI,MAAM;MAAEI,MAAM;EACpD,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAX,IACFF,aAAa,CAACF,MAAD,CADX;MAGFJ,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEc,YAAT,EAHE,CAAP;AAID;IAOYC,UAAU,GAAG,UAACL,EAAD;MAAGV,OAAO;MAAEI,MAAM;MAAEI,MAAM;EAClD,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAX,IAAgCL,WAAW,CAACC,MAAD,CAAlD;AACD;IAOYY,YAAY,GAAG,UAACN,EAAD;MAAGV,OAAO;MAAEQ,MAAM;EAC5C,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAlB;AACD;IAOYS,eAAe,GAAG,UAACC,KAAD;EACrB,IAAAlB,OAAO,GAAqBkB,KAAK,QAAjC;MAASd,MAAM,GAAac,KAAK,OAAjC;MAAiBV,MAAM,GAAKU,KAAK,OAAjC;;EAER,IAAIlB,OAAO,CAACW,WAAR,KAAwB,MAA5B,EAAoC;IAClC,OACEK,YAAY,CAAC;MAAEhB,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CAAZ,IACGO,UAAU,CAAC;MAAEf,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CADb;OAGGC,UAAU,CAAC;MAAET,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CAHb,IAIGK,YAAY,CAAC;MAAEb,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CALjB;GADF,MAQO;IACL,OACEQ,YAAY,CAAC;MAAEhB,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CAAZ,IACGK,YAAY,CAAC;MAAEb,OAAO,SAAT;MAAWI,MAAM,QAAjB;MAAmBI,MAAM;KAA1B,CAFjB;;AAKH;;;;;;;;;;;;;"}