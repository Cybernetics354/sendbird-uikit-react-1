{"version":3,"file":"OpenChannelMessage.js","sources":["../../../../src/smart-components/OpenChannel/components/OpenChannelMessage/RemoveMessageModal.tsx","../../../../src/ui/FileViewer/types.js","../../../../src/smart-components/OpenChannel/components/OpenChannelMessage/utils.ts","../../../../src/smart-components/OpenChannel/components/OpenChannelMessage/index.tsx"],"sourcesContent":["import React, { useContext } from 'react'\nimport { ClientFileMessage, ClientUserMessage } from '../../../../module';\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\n\ninterface Props {\n  onCloseModal(): void;\n  onDeleteMessage(message: ClientUserMessage | ClientFileMessage, callback?: () => void): void;\n}\n\nexport default function RemoveMessageModal({\n  onCloseModal,\n  onDeleteMessage,\n}: Props): JSX.Element {\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <Modal\n      onCancel={onCloseModal}\n      onSubmit={onDeleteMessage}\n      submitText={stringSet.MESSAGE_MENU__DELETE}\n      titleText={stringSet.MODAL__DELETE_MESSAGE__TITLE}\n    />\n  );\n}\n","// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp', // not supported in IE\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const isImage = (type) => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type) => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type) => type === 'image/gif';\nexport const unSupported = (type) => !(isImage(type) || isVideo(type));\n\nexport default SUPPORTED_MIMES;\n","import { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport { isImage, isVideo } from '../../../../ui/FileViewer/types';\n\nexport const MessageTypes = {\n  ADMIN: 'ADMIN',\n  USER: 'USER',\n  FILE: 'FILE',\n  THUMBNAIL: 'THUMBNAIL',\n  OG: 'OG',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport const getMessageType = (message: UserMessage | FileMessage | AdminMessage): string => {\n  if ((message.isUserMessage && message.isUserMessage()) || message.messageType === 'user') {\n    return (message.ogMetaData)\n      ? MessageTypes.OG\n      : MessageTypes.USER;\n  }\n  if (message.isAdminMessage && message.isAdminMessage()) {\n    return MessageTypes.ADMIN;\n  }\n  if (message.messageType === 'file') {\n    return (isImage((message as FileMessage).type) || isVideo((message as FileMessage).type))\n      ? MessageTypes.THUMBNAIL\n      : MessageTypes.FILE;\n  }\n  return MessageTypes.UNKNOWN;\n};\n\nexport default {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n};\n","import React, {\n  useState,\n  useRef,\n  ReactElement,\n  useMemo,\n} from 'react';\nimport { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport { User } from '@sendbird/chat';\nimport format from 'date-fns/format';\n\nimport OpenChannelUserMessage from '../../../../ui/OpenchannelUserMessage';\nimport OpenChannelAdminMessage from '../../../../ui/OpenChannelAdminMessage';\nimport OpenChannelOGMessage from '../../../../ui/OpenchannelOGMessage';\nimport OpenChannelThumbnailMessage from '../../../../ui/OpenchannelThumbnailMessage';\nimport OpenChannelFileMessage from '../../../../ui/OpenchannelFileMessage';\n// import UnknownMessage from '../../../../ui/UnknownMessage';\n\nimport DateSeparator from '../../../../ui/DateSeparator';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport MessageInput from '../../../../ui/MessageInput';\nimport FileViewer from '../../../../ui/FileViewer';\n\nimport RemoveMessageModal from './RemoveMessageModal';\nimport {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n} from './utils';\nimport { useOpenChannelContext } from '../../context/OpenChannelProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport type { RenderMessageProps } from '../../../../types';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\n\nexport type OpenChannelMessageProps = {\n  renderMessage?: (props: RenderMessageProps) => React.ElementType<RenderMessageProps>;\n  message: UserMessage | FileMessage | AdminMessage;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  hasSeparator?: boolean;\n  editDisabled?: boolean;\n};\n\nexport default function MessagOpenChannelMessageeHoc(props: OpenChannelMessageProps): ReactElement {\n  const {\n    message,\n    chainTop,\n    chainBottom,\n    hasSeparator,\n    renderMessage,\n  } = props;\n\n  const {\n    currentOpenChannel,\n    deleteMessage,\n    updateMessage,\n    resendMessage,\n  } = useOpenChannelContext();\n  const { dateLocale } = useLocalization();\n  const editDisabled = currentOpenChannel?.isFrozen;\n\n  const globalState = useSendbirdStateContext();\n  const userId = globalState?.config?.userId;\n\n  let sender: User = null;\n  if (message?.messageType !== 'admin') {\n    sender = (message as UserMessage | FileMessage)?.sender;\n  }\n\n  const RenderedMessage = useMemo(() => (props: RenderMessageProps) => {\n    return (\n      <>\n        {\n          renderMessage\n            ? (renderMessage(props))\n            : null\n        }\n      </>\n    );\n  }, [message, renderMessage]);\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [showRemove, setShowRemove] = useState(false);\n  const [showFileViewer, setShowFileViewer] = useState(false);\n  const editMessageInputRef = useRef(null);\n\n  let isByMe = false;\n\n  if (sender && message?.messageType !== 'admin') {\n    // pending and failed messages are by me\n    isByMe = (userId === sender.userId)\n      || ((message as UserMessage | FileMessage)?.sendingStatus === SendingMessageStatus.PENDING)\n      || ((message as UserMessage | FileMessage)?.sendingStatus === SendingMessageStatus.FAILED);\n  }\n\n  if (renderMessage && RenderedMessage) {\n    return (\n      <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n        <RenderedMessage message={message} chainTop={chainTop} chainBottom={chainBottom} />\n      </div>\n    );\n  }\n\n  if (message?.messageType === 'user' && showEdit) {\n    return (\n      <MessageInput\n        isEdit\n        disabled={editDisabled}\n        ref={editMessageInputRef}\n        message={message as UserMessage}\n        name={message?.messageId}\n        onUpdateMessage={({ messageId, message }) => {\n          updateMessage(messageId, message);\n          setShowEdit(false);\n        }}\n        onCancelEdit={() => { setShowEdit(false); }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n      {/* date-separator */}\n      {\n        hasSeparator && (\n          <DateSeparator>\n            <Label type={LabelTypography.CAPTION_2} color={LabelColors.ONBACKGROUND_2}>\n              {format(message?.createdAt, 'MMMM dd, yyyy', {\n                locale: dateLocale,\n              })}\n            </Label>\n          </DateSeparator>\n        )\n      }\n      {/* Message */}\n      {\n        {\n          [MessageTypes.ADMIN]: (() => {\n            if (message?.messageType === 'admin') {\n              return (\n                <OpenChannelAdminMessage message={message as AdminMessage} />\n              )\n            }\n          })(),\n          [MessageTypes.FILE]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelFileMessage\n                  message={message as FileMessage}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.OG]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelOGMessage\n                  message={message as UserMessage}\n                  userId={userId}\n                  showEdit={setShowEdit}\n                  disabled={editDisabled}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.THUMBNAIL]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelThumbnailMessage\n                  message={message as FileMessage}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  onClick={setShowFileViewer}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.USER]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelUserMessage\n                  message={message as UserMessage}\n                  userId={userId}\n                  disabled={editDisabled}\n                  showEdit={setShowEdit}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.UNKNOWN]: (() => {\n            return;\n            // return (\n            //   <OpenChannelUnknownMessage message={message} />\n            // );\n          })(),\n        }[getMessageType(message)]\n      }\n      {/* Modal */}\n      {\n        showRemove && (\n          <RemoveMessageModal\n            onCloseModal={() => setShowRemove(false)}\n            onDeleteMessage={() => {\n              if (message?.messageType !== 'admin') {\n                deleteMessage(message);\n              }\n            }}\n          />\n        )\n      }\n      {\n        (showFileViewer && message?.messageType === 'file') && (\n          <FileViewer\n            onClose={() => setShowFileViewer(false)}\n            message={message}\n            onDelete={() => deleteMessage(message)}\n            isByMe={isByMe}\n          />\n        )\n      }\n      {/* {\n        !((message?.isFileMessage && message?.isFileMessage()) || message?.messageType === 'file')\n        && !(message?.isAdminMessage && message?.isAdminMessage())\n        && !(((message?.isUserMessage && message?.isUserMessage()) || message?.messageType === 'user'))\n        && !(showFileViewer)\n        && (\n          <UnknownMessage\n            message={message}\n            isByMe={isByMe}\n            showRemove={setShowRemove}\n            chainTop={chainTop}\n            chainBottom={chainBottom}\n          />\n        )\n      } */}\n    </div>\n  );\n}\n"],"names":["RemoveMessageModal","_a","onCloseModal","onDeleteMessage","stringSet","useContext","LocalizationContext","React","Modal","MESSAGE_MENU__DELETE","MODAL__DELETE_MESSAGE__TITLE","SUPPORTED_MIMES","IMAGE","VIDEO","isImage","type","indexOf","isVideo","MessageTypes","ADMIN","USER","FILE","THUMBNAIL","OG","UNKNOWN","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","getMessageType","message","isUserMessage","messageType","ogMetaData","isAdminMessage","MessagOpenChannelMessageeHoc","props","chainTop","chainBottom","hasSeparator","renderMessage","_c","useOpenChannelContext","currentOpenChannel","deleteMessage","updateMessage","resendMessage","dateLocale","useLocalization","editDisabled","isFrozen","globalState","useSendbirdStateContext","userId","_b","config","sender","RenderedMessage","useMemo","_d","useState","showEdit","setShowEdit","_e","showRemove","setShowRemove","_f","showFileViewer","setShowFileViewer","editMessageInputRef","useRef","isByMe","sendingStatus","MessageInput","messageId","DateSeparator","Label","LabelTypography","CAPTION_2","LabelColors","ONBACKGROUND_2","format","createdAt","locale","OpenChannelAdminMessage","OpenChannelFileMessage","OpenChannelOGMessage","OpenChannelThumbnailMessage","OpenChannelUserMessage","FileViewer"],"mappings":"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"}