{"version":3,"file":"UserListItem.js","sources":["../../../../src/smart-components/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\nconst COMPONENT_NAME = 'sendbird-user-list-item--small';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = SendBird.User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        COMPONENT_NAME, ...injectingClassNames,\n      ].join(' ')}\n    >\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n            ref={avatarRef}\n            className={`${COMPONENT_NAME}__avatar`}\n            src={user.profileUrl}\n            width={24}\n            height={24}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: 0, paddingBottom: 0 }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className={`${COMPONENT_NAME}__title`}\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            \" (You)\"\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className={`${COMPONENT_NAME}__subtitle`}\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className={`${COMPONENT_NAME}__operator`}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className={`${COMPONENT_NAME}__action`}>\n            { action({ actionRef, parentRef }) }\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default UserListItem;\n"],"names":["COMPONENT_NAME","UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","__spreadArray","join","isMuted","MutedAvatarOverlay","ContextMenu","toggleDropdown","Avatar","concat","profileUrl","closeDropdown","MenuItems","paddingTop","paddingBottom","currentUserId","close","UserProfile","Label","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2"],"mappings":"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"}