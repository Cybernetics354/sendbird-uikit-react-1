{"version":3,"file":"MessageSearch.js","sources":["../../src/smart-components/MessageSearch/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './index.scss';\n\nimport MessageSearch, { MessageSearchUIProps } from './components/MessageSearchUI';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\nimport { MessageSearchProvider, MessageSearchProviderProps } from './context/MessageSearchProvider';\n\nexport interface MessageSearchPannelProps extends\n  MessageSearchUIProps, MessageSearchProviderProps {\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: MessageSearchPannelProps): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n    messageSearchQuery,\n    renderPlaceHolderError,\n    renderPlaceHolderLoading,\n    renderPlaceHolderNoString,\n    renderPlaceHolderEmptyList,\n    renderSearchItem,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearchProvider\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n          messageSearchQuery={messageSearchQuery}\n        >\n          <MessageSearch\n            renderPlaceHolderError={renderPlaceHolderError}\n            renderPlaceHolderLoading={renderPlaceHolderLoading}\n            renderPlaceHolderNoString={renderPlaceHolderNoString}\n            renderPlaceHolderEmptyList={renderPlaceHolderEmptyList}\n            renderSearchItem={renderSearchItem}\n          />\n        </MessageSearchProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n"],"names":["COMPONENT_CLASS_NAME","MessageSearchPannel","props","channelUrl","onResultClick","onCloseClick","messageSearchQuery","renderPlaceHolderError","renderPlaceHolderLoading","renderPlaceHolderNoString","renderPlaceHolderEmptyList","renderSearchItem","_a","useState","searchString","setSearchString","_b","inputString","setInputString","_c","loading","setLoading","stringSet","useContext","LocalizationContext","timeout","useEffect","clearTimeout","setTimeout","handleOnChangeInputString","e","target","value","handleOnResultLoaded","handleOnClickResetStringButton","stopPropagation","React","Label","LabelTypography","H_2","LabelColors","ONBACKGROUND_1","SEARCH_IN_CHANNEL","IconButton","Icon","IconTypes","CLOSE","IconColors","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","Loader","SPINNER","PRIMARY","REMOVE","MessageSearchProvider","MessageSearch"],"mappings":"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"}