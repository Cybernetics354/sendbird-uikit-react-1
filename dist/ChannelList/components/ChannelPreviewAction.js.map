{"version":3,"file":"ChannelPreviewAction.js","sources":["../../../src/smart-components/ChannelList/components/LeaveChannel/index.tsx","../../../src/smart-components/ChannelList/components/ChannelPreviewAction.jsx"],"sourcesContent":["import React from 'react';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useChannelListContext } from '../../context/ChannelListProvider';\n\nexport type LeaveChannelProps = {\n  onSubmit: () => void;\n  onCancel: () => void;\n}\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const channel = useChannelListContext()?.currentChannel;\n  const state = useSendbirdStateContext();\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  if (channel) {\n    return (\n      <Modal\n        disabled={!isOnline}\n        onCancel={onCancel}\n        onSubmit={() => {\n          logger.info('ChannelSettings: Leaving channel', channel);\n          channel?.leave()\n            .then(() => {\n              logger.info('ChannelSettings: Leaving channel successful!', channel);\n              onSubmit();\n            });\n        }}\n        submitText=\"Leave\"\n        titleText=\"Leave this channel?\"\n      />\n    );\n  }\n};\n\nexport default LeaveChannel;\n","import React, {\n  useState,\n  useRef,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from './LeaveChannel';\n\nexport default function ChannelPreviewAction({ disabled, onLeaveChannel }) {\n  const parentRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => { e.stopPropagation(); }}\n      tabIndex={0}\n      onClick={(e) => { e.stopPropagation(); }}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <IconButton\n            ref={parentRef}\n            onClick={toggleDropdown}\n            height=\"32px\"\n            width=\"32px\"\n          >\n            <Icon\n              type={IconTypes.MORE}\n              fillColor={IconColors.PRIMARY}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            parentRef={parentRef}\n            parentContainRef={parentRef}\n            closeDropdown={closeDropdown}\n          >\n            <MenuItem\n              onClick={() => {\n                if (disabled) { return; }\n                setShowModal(true);\n                closeDropdown();\n              }}\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {\n        showModal && (\n          <LeaveChannelModal\n            onSubmit={() => {\n              setShowModal(false);\n              onLeaveChannel();\n            }}\n            onCancel={() => setShowModal(false)}\n          />\n        )\n      }\n    </div>\n  );\n}\n\nChannelPreviewAction.propTypes = {\n  disabled: PropTypes.bool,\n  onLeaveChannel: PropTypes.func.isRequired,\n};\n\nChannelPreviewAction.defaultProps = {\n  disabled: false,\n};\n"],"names":["LeaveChannel","props","_d","onSubmit","noop","_e","onCancel","channel","useChannelListContext","currentChannel","state","useSendbirdStateContext","logger","config","isOnline","React","info","leave","then","ChannelPreviewAction","disabled","onLeaveChannel","parentRef","useRef","showModal","setShowModal","useState","stringSet","useContext","LocalizationContext","display","e","stopPropagation","toggleDropdown","IconTypes","MORE","IconColors","PRIMARY","closeDropdown","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal","propTypes","PropTypes","bool","func","isRequired","defaultProps"],"mappings":"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"}