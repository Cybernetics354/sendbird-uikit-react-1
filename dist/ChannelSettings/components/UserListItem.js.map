{"version":3,"file":"UserListItem.js","sources":["../../../src/smart-components/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\nconst COMPONENT_NAME = 'sendbird-user-list-item--small';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = SendBird.User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        COMPONENT_NAME, ...injectingClassNames,\n      ].join(' ')}\n    >\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n            ref={avatarRef}\n            className={`${COMPONENT_NAME}__avatar`}\n            src={user.profileUrl}\n            width={24}\n            height={24}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: 0, paddingBottom: 0 }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className={`${COMPONENT_NAME}__title`}\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            \" (You)\"\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className={`${COMPONENT_NAME}__subtitle`}\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className={`${COMPONENT_NAME}__operator`}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className={`${COMPONENT_NAME}__action`}>\n            { action({ actionRef, parentRef }) }\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default UserListItem;\n"],"names":["COMPONENT_NAME","UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","__spreadArray","join","isMuted","toggleDropdown","profileUrl","closeDropdown","paddingTop","paddingBottom","currentUserId","close","UserProfile","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2"],"mappings":"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"}